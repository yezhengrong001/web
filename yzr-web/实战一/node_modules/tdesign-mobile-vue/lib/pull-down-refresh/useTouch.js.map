{"version":3,"file":"useTouch.js","sources":["../../src/pull-down-refresh/useTouch.ts"],"sourcesContent":["import { ref } from 'vue';\n\nconst isElement = (node: Element) => {\n  const ELEMENT_NODE_TYPE = 1;\n  return node.tagName !== 'HTML' && node.tagName !== 'BODY' && node.nodeType === ELEMENT_NODE_TYPE;\n};\n\nexport function useTouch() {\n  const startY = ref(0);\n  const deltaY = ref(0);\n  const start = (event: TouchEvent) => {\n    startY.value = event.touches[0].clientY;\n    deltaY.value = 0;\n  };\n  const move = (event: TouchEvent) => {\n    const touch = event.touches[0];\n    deltaY.value = touch.clientY - startY.value;\n  };\n  return {\n    startY,\n    deltaY,\n    start,\n    move,\n  };\n}\n// 缓动函数\nexport const easeDistance = (distance: number, pullDistance: number) => {\n  if (distance > pullDistance) {\n    if (distance < pullDistance * 2) {\n      distance = pullDistance + (distance - pullDistance) / 2;\n    } else {\n      distance = pullDistance * 1.5 + (distance - pullDistance * 2) / 4;\n    }\n  }\n  return Math.round(distance);\n};\n// 获取最新的可滚动父元素\nexport const getScrollParent = (node: Element) => {\n  let res = node;\n  while (res && isElement(res)) {\n    if (/auto|scroll/i.test(window.getComputedStyle(res).overflowY)) {\n      return res;\n    }\n    res = res.parentNode as Element;\n  }\n};\n// 确保可滚动的父元素此时处于未滚动状态\nexport const isReachTop = (e: TouchEvent) => {\n  const scrollParent = getScrollParent(e.target as Element);\n  return !scrollParent || !scrollParent.scrollTop;\n};\n"],"names":["isElement","node","ELEMENT_NODE_TYPE","tagName","nodeType","useTouch","startY","ref","deltaY","start","event","value","touches","clientY","move","touch","easeDistance","distance","pullDistance","Math","round","getScrollParent","res","test","window","getComputedStyle","overflowY","parentNode","isReachTop","e","scrollParent","target","scrollTop"],"mappings":";;;;;;;;;;;;AAEA,IAAMA,SAAA,GAAY,SAAZA,SAAA,CAAaC,IAAkB,EAAA;EACnC,IAAMC,iBAAoB,GAAA,CAAA,CAAA;AAC1B,EAAA,OAAOD,KAAKE,OAAY,KAAA,MAAA,IAAUF,KAAKE,OAAY,KAAA,MAAA,IAAUF,KAAKG,QAAa,KAAAF,iBAAA,CAAA;AACjF,CAAA,CAAA;AAEO,SAASG,QAAW,GAAA;AACnB,EAAA,IAAAC,MAAA,GAASC,QAAI,CAAC,CAAA,CAAA;AACd,EAAA,IAAAC,MAAA,GAASD,QAAI,CAAC,CAAA,CAAA;AACd,EAAA,IAAAE,KAAA,GAAQ,SAARA,KAAA,CAASC,KAAsB,EAAA;IAC5BJ,MAAA,CAAAK,KAAA,GAAQD,KAAM,CAAAE,OAAA,CAAQ,CAAG,CAAA,CAAAC,OAAA,CAAA;IAChCL,MAAA,CAAOG,KAAQ,GAAA,CAAA,CAAA;GACjB,CAAA;AACM,EAAA,IAAAG,IAAA,GAAO,SAAPA,IAAA,CAAQJ,KAAsB,EAAA;AAC5B,IAAA,IAAAK,KAAA,GAAQL,MAAME,OAAQ,CAAA,CAAA,CAAA,CAAA;IACrBJ,MAAA,CAAAG,KAAA,GAAQI,KAAM,CAAAF,OAAA,GAAUP,MAAO,CAAAK,KAAA,CAAA;GACxC,CAAA;EACO,OAAA;AACLL,IAAAA,MAAA,EAAAA,MAAA;AACAE,IAAAA,MAAA,EAAAA,MAAA;AACAC,IAAAA,KAAA,EAAAA,KAAA;AACAK,IAAAA,IAAA,EAAAA,IAAAA;GACF,CAAA;AACF,CAAA;AAEa,IAAAE,YAAA,GAAe,SAAfA,YAAA,CAAgBC,QAAA,EAAkBC,YAAyB,EAAA;EACtE,IAAID,WAAWC,YAAc,EAAA;AACvB,IAAA,IAAAD,QAAA,GAAWC,eAAe,CAAG,EAAA;MACpBD,QAAA,GAAAC,YAAA,GAAA,CAAgBD,WAAWC,YAAgB,IAAA,CAAA,CAAA;AACxD,KAAO,MAAA;AACLD,MAAAA,QAAA,GAAWC,YAAe,GAAA,GAAA,GAAA,CAAOD,QAAW,GAAAC,YAAA,GAAe,CAAK,IAAA,CAAA,CAAA;AAClE,KAAA;AACF,GAAA;AACO,EAAA,OAAAC,IAAA,CAAKC,MAAMH,QAAQ,CAAA,CAAA;AAC5B,EAAA;IAEaI,eAAA,GAAkB,SAAlBA,eAAA,CAAmBpB,IAAkB,EAAA;EAChD,IAAIqB,GAAM,GAAArB,IAAA,CAAA;AACH,EAAA,OAAAqB,GAAA,IAAOtB,SAAU,CAAAsB,GAAG,CAAG,EAAA;AAC5B,IAAA,IAAI,eAAeC,IAAK,CAAAC,MAAA,CAAOC,iBAAiBH,GAAG,CAAA,CAAEI,SAAS,CAAG,EAAA;AACxD,MAAA,OAAAJ,GAAA,CAAA;AACT,KAAA;IACAA,GAAA,GAAMA,GAAI,CAAAK,UAAA,CAAA;AACZ,GAAA;AACF,EAAA;IAEaC,UAAA,GAAa,SAAbA,UAAA,CAAcC,CAAkB,EAAA;AACrC,EAAA,IAAAC,YAAA,GAAeT,eAAgB,CAAAQ,CAAA,CAAEE,MAAiB,CAAA,CAAA;AACjD,EAAA,OAAA,CAACD,YAAgB,IAAA,CAACA,YAAa,CAAAE,SAAA,CAAA;AACxC;;;;;;;"}