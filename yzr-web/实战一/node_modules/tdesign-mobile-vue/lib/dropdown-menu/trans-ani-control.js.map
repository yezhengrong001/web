{"version":3,"file":"trans-ani-control.js","sources":["../../src/dropdown-menu/trans-ani-control.ts"],"sourcesContent":["import { nextTick } from 'vue';\nimport { NOOP } from '../shared/functions';\nimport { DropdownMenuDo } from './context';\n\nexport default class TransAniControl {\n  timeout: number | null;\n\n  finallyDo: DropdownMenuDo;\n\n  constructor() {\n    this.timeout = null;\n    this.finallyDo = NOOP;\n  }\n\n  setTo(duration: number, nowDo: DropdownMenuDo, nextTickDo: DropdownMenuDo, finallyDo: DropdownMenuDo): void {\n    if (this.timeout) {\n      window.clearTimeout(this.timeout);\n      this.finallyDo();\n    }\n    nowDo();\n    nextTick(() => window.setTimeout(nextTickDo, 0));\n    this.finallyDo = finallyDo;\n\n    this.timeout = window.setTimeout(() => {\n      this.finallyDo();\n      this.finallyDo = NOOP;\n      this.timeout = 0;\n    }, duration);\n  }\n}\n"],"names":["TransAniControl","_classCallCheck","_defineProperty","timeout","finallyDo","NOOP","_createClass","duration","nowDo","nextTickDo","window","clearTimeout","nextTick","setTimeout"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACqB,IAGAA,eAAgB,gBAAA,YAAA;EAKnC,SAAc,eAAA,GAAA;AAAA,IAAAC,mCAAA,CAAA,IAAA,EAAA,eAAA,CAAA,CAAA;AAAA,IAAAC,mCAAA,CAAA,IAAA,EAAA,SAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAAA,IAAAA,mCAAA,CAAA,IAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IACZ,IAAA,CAAKC,OAAU,GAAA,IAAA,CAAA;IACf,IAAA,CAAKC,SAAY,GAAAC,qBAAA,CAAA;AACnB,GAAA;AAAA,EAAAC,gCAAA,CAAA,eAAA,EAAA,CAAA;AAAA,IAAA,GAAA,EAAA,OAAA;IAAA,KAEA,EAAA,SAAA,KAAA,CAAMC,QAAA,EAAkBC,KAAuB,EAAAC,UAAA,EAA4BL,SAAiC,EAAA;AAAA,MAAA,IAAA,KAAA,GAAA,IAAA,CAAA;MAC1G,IAAI,KAAKD,OAAS,EAAA;AACTO,QAAAA,MAAA,CAAAC,YAAA,CAAa,KAAKR,OAAO,CAAA,CAAA;QAChC,IAAA,CAAKC,SAAU,EAAA,CAAA;AACjB,OAAA;AACMI,MAAAA,KAAA,EAAA,CAAA;AACNI,MAAAA,YAAA,CAAS,YAAA;AAAA,QAAA,OAAMF,MAAA,CAAOG,UAAW,CAAAJ,UAAA,EAAY,CAAC,CAAC,CAAA;OAAA,CAAA,CAAA;MAC/C,IAAA,CAAKL,SAAY,GAAAA,SAAA,CAAA;AAEZ,MAAA,IAAA,CAAAD,OAAA,GAAUO,MAAO,CAAAG,UAAA,CAAW,YAAM;QACrC,KAAA,CAAKT,SAAU,EAAA,CAAA;QACf,KAAA,CAAKA,SAAY,GAAAC,qBAAA,CAAA;QACjB,KAAA,CAAKF,OAAU,GAAA,CAAA,CAAA;SACdI,QAAQ,CAAA,CAAA;AACb,KAAA;AAAA,GAAA,CAAA,CAAA,CAAA;AAAA,EAAA,OAAA,eAAA,CAAA;AAAA,CAAA;;;;"}