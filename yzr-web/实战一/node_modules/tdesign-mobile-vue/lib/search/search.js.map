{"version":3,"file":"search.js","sources":["../../src/search/search.vue","../../src/search/search.vue?vue&type=template&id=4b3de857&lang.js"],"sourcesContent":["<template>\n  <div :class=\"classes\">\n    <div :class=\"`${name}__form`\" :style=\"shapeStyle\">\n      <div :class=\"`${name}__box`\">\n        <div :class=\"`${name}__icon-search`\">\n          <slot name=\"leftIcon\">\n            <t-icon-search />\n          </slot>\n        </div>\n        <t-input\n          ref=\"searchInput\"\n          v-model=\"value\"\n          type=\"search\"\n          :class=\"`${name}__input`\"\n          :autofocus=\"focus\"\n          :placeholder=\"placeholder\"\n          @blur=\"onBlur\"\n          @focus=\"onFocus\"\n          @change=\"onChange\"\n        />\n        <div :class=\"`${name}__icon-close`\">\n          <t-icon-clear @click=\"onClear\" />\n        </div>\n      </div>\n      <label v-show=\"state.labelActive\" :class=\"`${name}__label`\" :style=\"shapeStyle\" @click=\"onClick\">\n        <div :class=\"`${name}__label-icon-search`\">\n          <slot name=\"leftIcon\">\n            <t-icon-search />\n          </slot>\n        </div>\n        <span :class=\"`${name}__label-text`\">{{ placeholder }}</span>\n      </label>\n    </div>\n    <slot name=\"action\">\n      <t-button\n        v-if=\"action\"\n        v-show=\"!state.labelActive\"\n        variant=\"text\"\n        :class=\"`${name}__cancel-button`\"\n        @click=\"onCancel\"\n      >\n        {{ action }}\n      </t-button>\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { SearchIcon as TIconSearch, CloseCircleFilledIcon as TIconClear } from 'tdesign-icons-vue-next';\nimport { ref, reactive, computed, defineComponent, toRefs } from 'vue';\nimport config from '../config';\nimport TButton from '../button';\nimport TInput, { InputValue } from '../input';\nimport { extendAPI } from '../shared';\nimport searchProps from './props';\nimport { useDefault } from '../shared/useDefault';\n\nconst { prefix } = config;\nconst name = `${prefix}-search`;\n\ntype InputBlurContext = { e: FocusEvent };\ntype InputFocusContent = { e: FocusEvent };\ntype InputChangeContext = { e?: MouseEvent | InputEvent | undefined } | undefined;\n\nexport default defineComponent({\n  name,\n  components: { TIconSearch, TIconClear, TButton, TInput },\n  props: searchProps,\n  setup(props, { emit }) {\n    const classes = computed(() => ({\n      [`${name}`]: true,\n      [`${prefix}-is-focused`]: !state.labelActive,\n    }));\n    const [value] = useDefault(props, emit, 'value', 'change');\n    const shapeStyle = computed(() => ({\n      borderRadius: props.shape === 'square' ? undefined : '50px',\n    }));\n    const searchInput = ref();\n\n    const state = reactive({\n      labelActive: !value.value,\n      inputVal: '',\n    });\n\n    const doFocus = () => {\n      searchInput.value?.focus();\n    };\n\n    const onBlur = (value: any, context: InputBlurContext) => {\n      state.labelActive = !value;\n      props.onBlur?.(value, { e: context.e });\n    };\n\n    const onClick = () => {\n      state.labelActive = !state.labelActive;\n      doFocus();\n    };\n\n    const onFocus = (value: InputValue, context: InputFocusContent) => {\n      state.labelActive = false;\n      props.onFocus?.(value as string, { e: context.e });\n    };\n\n    const onClear = (e: MouseEvent) => {\n      searchInput.value.innerValue = '';\n      props.onClear?.({ e });\n    };\n\n    const onCancel = (e: MouseEvent) => {\n      state.labelActive = !state.labelActive;\n      props.onActionClick?.({ e });\n    };\n\n    const onChange = (value: InputValue, context: InputChangeContext) => {\n      props.onChange?.(value as string, { e: context?.e });\n    };\n\n    extendAPI({ doFocus, blur });\n\n    return {\n      ...toRefs(props),\n      name: ref(name),\n      classes,\n      shapeStyle,\n      onClick,\n      onCancel,\n      onBlur,\n      onFocus,\n      onClear,\n      onChange,\n      state,\n      value,\n      searchInput,\n    };\n  },\n});\n</script>\n","<template>\n  <div :class=\"classes\">\n    <div :class=\"`${name}__form`\" :style=\"shapeStyle\">\n      <div :class=\"`${name}__box`\">\n        <div :class=\"`${name}__icon-search`\">\n          <slot name=\"leftIcon\">\n            <t-icon-search />\n          </slot>\n        </div>\n        <t-input\n          ref=\"searchInput\"\n          v-model=\"value\"\n          type=\"search\"\n          :class=\"`${name}__input`\"\n          :autofocus=\"focus\"\n          :placeholder=\"placeholder\"\n          @blur=\"onBlur\"\n          @focus=\"onFocus\"\n          @change=\"onChange\"\n        />\n        <div :class=\"`${name}__icon-close`\">\n          <t-icon-clear @click=\"onClear\" />\n        </div>\n      </div>\n      <label v-show=\"state.labelActive\" :class=\"`${name}__label`\" :style=\"shapeStyle\" @click=\"onClick\">\n        <div :class=\"`${name}__label-icon-search`\">\n          <slot name=\"leftIcon\">\n            <t-icon-search />\n          </slot>\n        </div>\n        <span :class=\"`${name}__label-text`\">{{ placeholder }}</span>\n      </label>\n    </div>\n    <slot name=\"action\">\n      <t-button\n        v-if=\"action\"\n        v-show=\"!state.labelActive\"\n        variant=\"text\"\n        :class=\"`${name}__cancel-button`\"\n        @click=\"onCancel\"\n      >\n        {{ action }}\n      </t-button>\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { SearchIcon as TIconSearch, CloseCircleFilledIcon as TIconClear } from 'tdesign-icons-vue-next';\nimport { ref, reactive, computed, defineComponent, toRefs } from 'vue';\nimport config from '../config';\nimport TButton from '../button';\nimport TInput, { InputValue } from '../input';\nimport { extendAPI } from '../shared';\nimport searchProps from './props';\nimport { useDefault } from '../shared/useDefault';\n\nconst { prefix } = config;\nconst name = `${prefix}-search`;\n\ntype InputBlurContext = { e: FocusEvent };\ntype InputFocusContent = { e: FocusEvent };\ntype InputChangeContext = { e?: MouseEvent | InputEvent | undefined } | undefined;\n\nexport default defineComponent({\n  name,\n  components: { TIconSearch, TIconClear, TButton, TInput },\n  props: searchProps,\n  setup(props, { emit }) {\n    const classes = computed(() => ({\n      [`${name}`]: true,\n      [`${prefix}-is-focused`]: !state.labelActive,\n    }));\n    const [value] = useDefault(props, emit, 'value', 'change');\n    const shapeStyle = computed(() => ({\n      borderRadius: props.shape === 'square' ? undefined : '50px',\n    }));\n    const searchInput = ref();\n\n    const state = reactive({\n      labelActive: !value.value,\n      inputVal: '',\n    });\n\n    const doFocus = () => {\n      searchInput.value?.focus();\n    };\n\n    const onBlur = (value: any, context: InputBlurContext) => {\n      state.labelActive = !value;\n      props.onBlur?.(value, { e: context.e });\n    };\n\n    const onClick = () => {\n      state.labelActive = !state.labelActive;\n      doFocus();\n    };\n\n    const onFocus = (value: InputValue, context: InputFocusContent) => {\n      state.labelActive = false;\n      props.onFocus?.(value as string, { e: context.e });\n    };\n\n    const onClear = (e: MouseEvent) => {\n      searchInput.value.innerValue = '';\n      props.onClear?.({ e });\n    };\n\n    const onCancel = (e: MouseEvent) => {\n      state.labelActive = !state.labelActive;\n      props.onActionClick?.({ e });\n    };\n\n    const onChange = (value: InputValue, context: InputChangeContext) => {\n      props.onChange?.(value as string, { e: context?.e });\n    };\n\n    extendAPI({ doFocus, blur });\n\n    return {\n      ...toRefs(props),\n      name: ref(name),\n      classes,\n      shapeStyle,\n      onClick,\n      onCancel,\n      onBlur,\n      onFocus,\n      onClear,\n      onChange,\n      state,\n      value,\n      searchInput,\n    };\n  },\n});\n</script>\n"],"names":["prefix","config","name","defineComponent","components","TIconSearch","TIconClear","TButton","TInput","props","searchProps","setup","emit","classes","computed","_defineProperty","state","labelActive","useDefault","_slicedToArray","value","shapeStyle","borderRadius","shape","searchInput","ref","reactive","inputVal","doFocus","focus","onBlur","context","e","onClick","onFocus","onClear","innerValue","onCancel","onActionClick","onChange","extendAPI","blur","toRefs","_createElementBlock","class","_ctx","_createElementVNode","style","_renderSlot","_createVNode","_component_t_icon_search","_component_t_input","$event","type","autofocus","placeholder","_component_t_icon_clear","_vShow","action","_createBlock","_component_t_button","variant"],"mappings":"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"}