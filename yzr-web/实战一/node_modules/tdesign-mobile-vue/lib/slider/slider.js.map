{"version":3,"file":"slider.js","sources":["../../src/slider/slider.vue","../../src/slider/slider.vue?vue&type=template&id=0027e9b8&lang.js"],"sourcesContent":["<template>\n  <div ref=\"rootRef\" :class=\"classes\">\n    <div v-if=\"showExtremeValue\" :class=\"`${name}-wrap__value--left`\">{{ min }}</div>\n    <div :class=\"`${name}`\" @click=\"onClick\">\n      <!-- 总长度 -->\n      <div ref=\"barRef\" :class=\"`${name}__bar`\"></div>\n      <!-- 滑块长度 -->\n      <div :class=\"`${name}__track`\" :style=\"trackStyle\"></div>\n      <!-- 滑块操作 -->\n      <div\n        v-for=\"(item, index) in dots\"\n        :key=\"index + 1\"\n        :class=\"handleClass\"\n        :style=\"`left:${getPercentage(item)}%`\"\n        @touchstart=\"onTouchStart($event, item)\"\n        @touchmove=\"onTouchMove($event, index)\"\n        @touchend=\"onTouchEnd($event, index)\"\n      ></div>\n      <!-- 刻度内容 -->\n      <div v-if=\"marksData\" :class=\"`${name}__mark`\">\n        <div\n          v-for=\"(v, k) in marksData\"\n          :key=\"k\"\n          :class=\"`${name}__mark-text t-is-${value && value > v[0] ? 'active' : ''}`\"\n          :style=\"`left: ${getPercentage(v[0])}%`\"\n        >\n          {{ typeof v[1] === 'function' ? v[1](v[0]) : v[1] }}\n        </div>\n      </div>\n    </div>\n    <div v-if=\"labelContent\" :class=\"`${name}-wrap__value`\">\n      <t-node :content=\"labelContent\"></t-node>\n    </div>\n    <div v-if=\"showExtremeValue\" :class=\"`${name}-wrap__value`\">{{ max }}</div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { ref, toRefs, computed, SetupContext, reactive, defineComponent, getCurrentInstance } from 'vue';\nimport config from '../config';\nimport props from './props';\nimport { useVModel } from '../shared/useVModel';\nimport { renderTNode, TNode } from '../shared';\n\nconst { prefix } = config;\nconst name = `${prefix}-slider`;\nconst { isArray } = Array;\n\nexport interface TouchData {\n  startValue: number;\n  newValue: number;\n  startX: number;\n  deltaX: number;\n  offsetX: number;\n}\n\nexport default defineComponent({\n  name,\n  components: { TNode },\n  props,\n  emits: ['drag-start', 'drag-end', 'update:modelValue', 'change'],\n  setup(props, context: SetupContext) {\n    const rootRef = ref<HTMLElement | null>(null);\n    const barRef = ref<HTMLElement | null>(null);\n    const defaultValue = props.defaultValue || props.min;\n    const { value, modelValue, max, min } = toRefs(props);\n    const [innerValue, setInnerValue] = useVModel(value, modelValue, defaultValue, props.onChange);\n    const internalInstance = getCurrentInstance();\n    const labelContent = computed(\n      () =>\n        !props.range &&\n        props.label &&\n        (typeof renderTNode(internalInstance, 'label') === 'object'\n          ? renderTNode(internalInstance, 'label')\n          : `${innerValue.value}`),\n    );\n\n    const isRange = computed(() => {\n      return props.range && isArray(innerValue.value) && innerValue.value.length === 2;\n    });\n    const dots = computed(() => {\n      if (isRange.value) return innerValue.value;\n\n      if (typeof innerValue.value === 'number') return [innerValue.value];\n      return [];\n    });\n\n    const classes = computed(() => [\n      `${name}-wrap`,\n      {\n        [`${prefix}-is-disabled`]: props.disabled,\n        [`${prefix}-is-mark`]: props.marks,\n        [`${prefix}-is-value`]: props.showExtremeValue,\n      },\n    ]);\n    const handleClass = computed(() => [`${name}__handle`]);\n    const marksData = computed(() => {\n      const sorter = (a: number[], b: number[]) => a[0] - b[0];\n      if (!props.range && props.marks) {\n        if (isArray(props.marks)) {\n          return props.marks.map((val: number) => [val, val]).sort(sorter);\n        }\n        return Object.entries(props.marks)\n          .map(([key, value]) => [parseInt(key, 10), value])\n          .sort(sorter);\n      }\n      return [];\n    });\n\n    const dragStatus = ref<string>('');\n    const touchData = reactive<TouchData>({\n      startValue: 0,\n      newValue: 0,\n      startX: 0,\n      deltaX: 0,\n      offsetX: 0,\n    });\n\n    function onTouchStart(event: TouchEvent, value: number) {\n      if (props.disabled) {\n        return;\n      }\n      event.stopPropagation();\n      event.preventDefault();\n      touchData.deltaX = 0;\n      touchData.offsetX = 0;\n      touchData.startX = event.touches[0].clientX;\n      touchData.startValue = format(value);\n      dragStatus.value = 'start';\n    }\n\n    function onTouchMove(event: TouchEvent, index: number) {\n      if (props.disabled) return;\n      if (!barRef.value) return;\n\n      event.stopPropagation();\n      event.preventDefault();\n      if (dragStatus.value === 'start') {\n        context.emit('drag-start');\n      }\n      const touch = event.touches[0];\n      touchData.deltaX = touch.clientX - touchData.startX;\n      touchData.offsetX = Math.abs(touchData.deltaX);\n      dragStatus.value = 'dragging';\n\n      const rect = barRef.value.getBoundingClientRect();\n      const delta = touchData.deltaX;\n      const total = rect.width;\n      const diff = (delta / total) * (props.max - props.min);\n\n      touchData.newValue = touchData.startValue + diff;\n      updateValue(touchData.newValue, index);\n    }\n\n    function onTouchEnd(event: TouchEvent, index: number) {\n      if (props.disabled) {\n        return;\n      }\n      event.stopPropagation();\n      event.preventDefault();\n\n      if (dragStatus.value === 'dragging') {\n        updateValue(touchData.newValue, index, true);\n        context.emit('drag-end');\n      }\n\n      dragStatus.value = '';\n    }\n\n    function onClick(event: MouseEvent) {\n      event.stopPropagation();\n\n      if (props.disabled) return;\n      if (!barRef.value) return;\n\n      const rect = barRef.value.getBoundingClientRect();\n      const delta = event.clientX - rect.left;\n      const total = rect.width;\n      const current = +props.min + (delta / total) * (props.max - props.min);\n\n      let index = 0;\n      if (props.range && innerValue.value) {\n        if (Math.abs(current - innerValue.value[0]) > Math.abs(current - innerValue.value[1])) {\n          index = 1;\n        }\n      }\n\n      touchData.startValue = innerValue.value?.[index];\n      updateValue(current, index, true);\n    }\n\n    function format(value: number): number {\n      let current = value;\n      if (!props.range && props.marks) {\n        if (marksData?.value?.length) {\n          let [min] = marksData.value[0];\n          marksData.value.forEach(([marksDataItemValue]) => {\n            if (Math.abs(marksDataItemValue - value) < Math.abs(min - value)) {\n              min = marksDataItemValue;\n            }\n          });\n          current = min;\n        }\n      }\n      return Math.round(Math.max(props.min, Math.min(current, props.max)) / props.step) * props.step;\n    }\n\n    function updateValue(newValue: number, index: number, end = false) {\n      const formatValue = format(newValue);\n      if (props.range && Array.isArray(innerValue.value)) {\n        const tmpValue = [...innerValue.value];\n        tmpValue[index] = formatValue;\n\n        if (end && formatValue !== touchData.startValue) {\n          tmpValue.sort((a, b) => a - b);\n          setInnerValue(tmpValue);\n        } else if (formatValue !== touchData.startValue) {\n          setInnerValue(tmpValue);\n        }\n      } else if (formatValue !== touchData.startValue) {\n        setInnerValue(formatValue);\n      }\n    }\n\n    const getPercentage = (value: number | undefined): number =>\n      ((value ? value - props.min : 0) / (props.max - props.min)) * 100;\n    const trackStyle = computed(() => {\n      if (props.range && isArray(innerValue.value)) {\n        return {\n          left: `${getPercentage(Math.min(innerValue.value[0], innerValue.value[1]))}%`,\n          width: `${getPercentage(Math.abs(innerValue.value[1] - innerValue.value[0]))}%`,\n        };\n      }\n      if (!isArray(innerValue.value)) {\n        return {\n          width: `${getPercentage(innerValue.value)}%`,\n        };\n      }\n      return {};\n    });\n\n    return {\n      max,\n      min,\n      name: ref(name),\n      marksData,\n      rootRef,\n      barRef,\n      dots,\n      value: innerValue,\n      labelContent,\n      classes,\n      handleClass,\n      trackStyle,\n      getPercentage,\n      onTouchStart,\n      onTouchMove,\n      onTouchEnd,\n      onClick,\n    };\n  },\n});\n</script>\n","<template>\n  <div ref=\"rootRef\" :class=\"classes\">\n    <div v-if=\"showExtremeValue\" :class=\"`${name}-wrap__value--left`\">{{ min }}</div>\n    <div :class=\"`${name}`\" @click=\"onClick\">\n      <!-- 总长度 -->\n      <div ref=\"barRef\" :class=\"`${name}__bar`\"></div>\n      <!-- 滑块长度 -->\n      <div :class=\"`${name}__track`\" :style=\"trackStyle\"></div>\n      <!-- 滑块操作 -->\n      <div\n        v-for=\"(item, index) in dots\"\n        :key=\"index + 1\"\n        :class=\"handleClass\"\n        :style=\"`left:${getPercentage(item)}%`\"\n        @touchstart=\"onTouchStart($event, item)\"\n        @touchmove=\"onTouchMove($event, index)\"\n        @touchend=\"onTouchEnd($event, index)\"\n      ></div>\n      <!-- 刻度内容 -->\n      <div v-if=\"marksData\" :class=\"`${name}__mark`\">\n        <div\n          v-for=\"(v, k) in marksData\"\n          :key=\"k\"\n          :class=\"`${name}__mark-text t-is-${value && value > v[0] ? 'active' : ''}`\"\n          :style=\"`left: ${getPercentage(v[0])}%`\"\n        >\n          {{ typeof v[1] === 'function' ? v[1](v[0]) : v[1] }}\n        </div>\n      </div>\n    </div>\n    <div v-if=\"labelContent\" :class=\"`${name}-wrap__value`\">\n      <t-node :content=\"labelContent\"></t-node>\n    </div>\n    <div v-if=\"showExtremeValue\" :class=\"`${name}-wrap__value`\">{{ max }}</div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { ref, toRefs, computed, SetupContext, reactive, defineComponent, getCurrentInstance } from 'vue';\nimport config from '../config';\nimport props from './props';\nimport { useVModel } from '../shared/useVModel';\nimport { renderTNode, TNode } from '../shared';\n\nconst { prefix } = config;\nconst name = `${prefix}-slider`;\nconst { isArray } = Array;\n\nexport interface TouchData {\n  startValue: number;\n  newValue: number;\n  startX: number;\n  deltaX: number;\n  offsetX: number;\n}\n\nexport default defineComponent({\n  name,\n  components: { TNode },\n  props,\n  emits: ['drag-start', 'drag-end', 'update:modelValue', 'change'],\n  setup(props, context: SetupContext) {\n    const rootRef = ref<HTMLElement | null>(null);\n    const barRef = ref<HTMLElement | null>(null);\n    const defaultValue = props.defaultValue || props.min;\n    const { value, modelValue, max, min } = toRefs(props);\n    const [innerValue, setInnerValue] = useVModel(value, modelValue, defaultValue, props.onChange);\n    const internalInstance = getCurrentInstance();\n    const labelContent = computed(\n      () =>\n        !props.range &&\n        props.label &&\n        (typeof renderTNode(internalInstance, 'label') === 'object'\n          ? renderTNode(internalInstance, 'label')\n          : `${innerValue.value}`),\n    );\n\n    const isRange = computed(() => {\n      return props.range && isArray(innerValue.value) && innerValue.value.length === 2;\n    });\n    const dots = computed(() => {\n      if (isRange.value) return innerValue.value;\n\n      if (typeof innerValue.value === 'number') return [innerValue.value];\n      return [];\n    });\n\n    const classes = computed(() => [\n      `${name}-wrap`,\n      {\n        [`${prefix}-is-disabled`]: props.disabled,\n        [`${prefix}-is-mark`]: props.marks,\n        [`${prefix}-is-value`]: props.showExtremeValue,\n      },\n    ]);\n    const handleClass = computed(() => [`${name}__handle`]);\n    const marksData = computed(() => {\n      const sorter = (a: number[], b: number[]) => a[0] - b[0];\n      if (!props.range && props.marks) {\n        if (isArray(props.marks)) {\n          return props.marks.map((val: number) => [val, val]).sort(sorter);\n        }\n        return Object.entries(props.marks)\n          .map(([key, value]) => [parseInt(key, 10), value])\n          .sort(sorter);\n      }\n      return [];\n    });\n\n    const dragStatus = ref<string>('');\n    const touchData = reactive<TouchData>({\n      startValue: 0,\n      newValue: 0,\n      startX: 0,\n      deltaX: 0,\n      offsetX: 0,\n    });\n\n    function onTouchStart(event: TouchEvent, value: number) {\n      if (props.disabled) {\n        return;\n      }\n      event.stopPropagation();\n      event.preventDefault();\n      touchData.deltaX = 0;\n      touchData.offsetX = 0;\n      touchData.startX = event.touches[0].clientX;\n      touchData.startValue = format(value);\n      dragStatus.value = 'start';\n    }\n\n    function onTouchMove(event: TouchEvent, index: number) {\n      if (props.disabled) return;\n      if (!barRef.value) return;\n\n      event.stopPropagation();\n      event.preventDefault();\n      if (dragStatus.value === 'start') {\n        context.emit('drag-start');\n      }\n      const touch = event.touches[0];\n      touchData.deltaX = touch.clientX - touchData.startX;\n      touchData.offsetX = Math.abs(touchData.deltaX);\n      dragStatus.value = 'dragging';\n\n      const rect = barRef.value.getBoundingClientRect();\n      const delta = touchData.deltaX;\n      const total = rect.width;\n      const diff = (delta / total) * (props.max - props.min);\n\n      touchData.newValue = touchData.startValue + diff;\n      updateValue(touchData.newValue, index);\n    }\n\n    function onTouchEnd(event: TouchEvent, index: number) {\n      if (props.disabled) {\n        return;\n      }\n      event.stopPropagation();\n      event.preventDefault();\n\n      if (dragStatus.value === 'dragging') {\n        updateValue(touchData.newValue, index, true);\n        context.emit('drag-end');\n      }\n\n      dragStatus.value = '';\n    }\n\n    function onClick(event: MouseEvent) {\n      event.stopPropagation();\n\n      if (props.disabled) return;\n      if (!barRef.value) return;\n\n      const rect = barRef.value.getBoundingClientRect();\n      const delta = event.clientX - rect.left;\n      const total = rect.width;\n      const current = +props.min + (delta / total) * (props.max - props.min);\n\n      let index = 0;\n      if (props.range && innerValue.value) {\n        if (Math.abs(current - innerValue.value[0]) > Math.abs(current - innerValue.value[1])) {\n          index = 1;\n        }\n      }\n\n      touchData.startValue = innerValue.value?.[index];\n      updateValue(current, index, true);\n    }\n\n    function format(value: number): number {\n      let current = value;\n      if (!props.range && props.marks) {\n        if (marksData?.value?.length) {\n          let [min] = marksData.value[0];\n          marksData.value.forEach(([marksDataItemValue]) => {\n            if (Math.abs(marksDataItemValue - value) < Math.abs(min - value)) {\n              min = marksDataItemValue;\n            }\n          });\n          current = min;\n        }\n      }\n      return Math.round(Math.max(props.min, Math.min(current, props.max)) / props.step) * props.step;\n    }\n\n    function updateValue(newValue: number, index: number, end = false) {\n      const formatValue = format(newValue);\n      if (props.range && Array.isArray(innerValue.value)) {\n        const tmpValue = [...innerValue.value];\n        tmpValue[index] = formatValue;\n\n        if (end && formatValue !== touchData.startValue) {\n          tmpValue.sort((a, b) => a - b);\n          setInnerValue(tmpValue);\n        } else if (formatValue !== touchData.startValue) {\n          setInnerValue(tmpValue);\n        }\n      } else if (formatValue !== touchData.startValue) {\n        setInnerValue(formatValue);\n      }\n    }\n\n    const getPercentage = (value: number | undefined): number =>\n      ((value ? value - props.min : 0) / (props.max - props.min)) * 100;\n    const trackStyle = computed(() => {\n      if (props.range && isArray(innerValue.value)) {\n        return {\n          left: `${getPercentage(Math.min(innerValue.value[0], innerValue.value[1]))}%`,\n          width: `${getPercentage(Math.abs(innerValue.value[1] - innerValue.value[0]))}%`,\n        };\n      }\n      if (!isArray(innerValue.value)) {\n        return {\n          width: `${getPercentage(innerValue.value)}%`,\n        };\n      }\n      return {};\n    });\n\n    return {\n      max,\n      min,\n      name: ref(name),\n      marksData,\n      rootRef,\n      barRef,\n      dots,\n      value: innerValue,\n      labelContent,\n      classes,\n      handleClass,\n      trackStyle,\n      getPercentage,\n      onTouchStart,\n      onTouchMove,\n      onTouchEnd,\n      onClick,\n    };\n  },\n});\n</script>\n"],"names":["prefix","config","name","isArray","Array","defineComponent","components","TNode","props","emits","setup","context","rootRef","ref","barRef","defaultValue","min","toRefs","value","modelValue","max","useVModel","onChange","_slicedToArray","innerValue","setInnerValue","internalInstance","getCurrentInstance","labelContent","computed","range","label","_typeof","renderTNode","isRange","length","dots","classes","disabled","marks","showExtremeValue","handleClass","marksData","sorter","a","b","map","val","sort","Object","entries","key","parseInt","dragStatus","touchData","reactive","startValue","newValue","startX","deltaX","offsetX","onTouchStart","event","stopPropagation","preventDefault","touches","clientX","format","onTouchMove","index","emit","touch","Math","abs","rect","getBoundingClientRect","delta","total","width","diff","updateValue","onTouchEnd","onClick","left","current","forEach","marksDataItemValue","round","step","end","formatValue","tmpValue","_toConsumableArray","getPercentage","trackStyle","_createElementBlock","class","_ctx","_createElementVNode","style","_openBlock","_Fragment","_renderList","item","_normalizeStyle","onTouchstart","$event","onTouchmove","onTouchend","v","k","_toDisplayString","_createVNode","_component_t_node","content"],"mappings":"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"}