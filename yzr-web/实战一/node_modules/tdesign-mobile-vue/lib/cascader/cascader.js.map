{"version":3,"file":"cascader.js","sources":["../../src/cascader/cascader.vue","../../src/cascader/cascader.vue?vue&type=template&id=e23a73b4&lang.js"],"sourcesContent":["<template>\n  <div :class=\"`${name}__wrapper`\">\n    <div :class=\"`${name}__title`\">\n      <t-node v-if=\"!(typeof titleTNode === 'string')\" :content=\"titleTNode\" />\n      <template v-else>{{ title }}</template>\n    </div>\n    <div :class=\"`${name}__close-btn`\" @click=\"onCancel\">\n      <t-node v-if=\"!(typeof closeBtnTNode === 'boolean')\" :content=\"closeBtnTNode\" />\n      <close-icon v-else-if=\"typeof closeIcon === 'boolean' && closeIcon\" size=\"24\" />\n    </div>\n    <div :class=\"`${name}__content`\">\n      <cascader-steps :value=\"stepIndex\" :items=\"steps\" @update:value=\"onStepsChange\" />\n      <div :class=\"`${name}__options-title`\">选项标题</div>\n      <div :class=\"`${name}__options-content`\">\n        <div v-for=\"(options, index) in items\" :key=\"index\" style=\"width: 100%\">\n          <transition appear name=\"slide\">\n            <div v-show=\"stepIndex === index\" style=\"width: 100%\">\n              <cascader-item\n                v-for=\"(item, idx) in options\"\n                :key=\"item.value\"\n                v-bind=\"item\"\n                :active=\"selectedIndexes[index] === idx\"\n                @click=\"onPick(item, idx, index, $event)\"\n              />\n            </div>\n          </transition>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { CloseIcon } from 'tdesign-icons-vue-next';\nimport { defineComponent, toRefs, getCurrentInstance, SetupContext, computed, ref, toRaw, reactive } from 'vue';\nimport { TdCascaderItems, TdCascaderItem } from './type';\nimport CascaderSteps from './steps.vue';\nimport config from '../config';\nimport CascaderProps from './props';\nimport { useEmitEvent, useVModel, renderTNode, TNode } from '../shared';\nimport CascaderItem from './cascader-item.vue';\n\nconst { prefix } = config;\nconst name = `${prefix}-cascader`;\n\nexport default defineComponent({\n  name,\n  components: { CloseIcon, CascaderItem, TNode, CascaderSteps },\n  props: CascaderProps,\n  emits: ['change', 'cancel', 'pick', 'click-tab', 'update:modelValue', 'update:value'],\n  setup(props: any, context: SetupContext) {\n    const emitEvent = useEmitEvent(props, context.emit);\n    const { value, modelValue } = toRefs(props);\n    const [cascaderValue, setCascaderValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const title = computed(() => props.title || '标题');\n    const closeIcon = computed(() => props.closeIcon || false);\n    const stepIndex = ref(0);\n    const selectedIndexes = reactive<number[]>([]);\n    const items = reactive<TdCascaderItems[]>([props.options]);\n    const steps = reactive(['选择选项']);\n    const onCancel = (e: MouseEvent) => {\n      emitEvent('cancel', { e });\n    };\n\n    const onStepsChange = (index: number) => {\n      stepIndex.value = index;\n      emitEvent('click-tab', index);\n    };\n\n    const internalInstance = getCurrentInstance();\n    const closeBtnTNode = computed(() => {\n      return renderTNode(internalInstance, 'closeIcon');\n    });\n    const titleTNode = computed(() => renderTNode(internalInstance, 'title'));\n\n    const onPick = (item: TdCascaderItem, index: number, level: number, e: MouseEvent) => {\n      if (item.disabled) {\n        return;\n      }\n      selectedIndexes[level] = index;\n      selectedIndexes.length = level + 1;\n      steps[level] = item.label;\n\n      emitEvent('pick', item.value, index, { e });\n\n      if (item?.children?.length) {\n        items[level + 1] = item.children;\n        items.length = level + 2;\n        stepIndex.value += 1;\n        steps[level + 1] = '选择选项';\n        steps.length = level + 2;\n      } else {\n        setCascaderValue(item.value);\n        emitEvent(\n          'change',\n          item.value,\n          items.map((item, index) => toRaw(item[selectedIndexes[index]])),\n          { e },\n        );\n      }\n    };\n\n    return {\n      closeBtnTNode,\n      titleTNode,\n      stepIndex,\n      name,\n      title,\n      closeIcon,\n      cascaderValue,\n      steps,\n      selectedIndexes,\n      items,\n      setCascaderValue,\n      emitEvent,\n      onCancel,\n      onPick,\n      onStepsChange,\n    };\n  },\n});\n</script>\n","<template>\n  <div :class=\"`${name}__wrapper`\">\n    <div :class=\"`${name}__title`\">\n      <t-node v-if=\"!(typeof titleTNode === 'string')\" :content=\"titleTNode\" />\n      <template v-else>{{ title }}</template>\n    </div>\n    <div :class=\"`${name}__close-btn`\" @click=\"onCancel\">\n      <t-node v-if=\"!(typeof closeBtnTNode === 'boolean')\" :content=\"closeBtnTNode\" />\n      <close-icon v-else-if=\"typeof closeIcon === 'boolean' && closeIcon\" size=\"24\" />\n    </div>\n    <div :class=\"`${name}__content`\">\n      <cascader-steps :value=\"stepIndex\" :items=\"steps\" @update:value=\"onStepsChange\" />\n      <div :class=\"`${name}__options-title`\">选项标题</div>\n      <div :class=\"`${name}__options-content`\">\n        <div v-for=\"(options, index) in items\" :key=\"index\" style=\"width: 100%\">\n          <transition appear name=\"slide\">\n            <div v-show=\"stepIndex === index\" style=\"width: 100%\">\n              <cascader-item\n                v-for=\"(item, idx) in options\"\n                :key=\"item.value\"\n                v-bind=\"item\"\n                :active=\"selectedIndexes[index] === idx\"\n                @click=\"onPick(item, idx, index, $event)\"\n              />\n            </div>\n          </transition>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { CloseIcon } from 'tdesign-icons-vue-next';\nimport { defineComponent, toRefs, getCurrentInstance, SetupContext, computed, ref, toRaw, reactive } from 'vue';\nimport { TdCascaderItems, TdCascaderItem } from './type';\nimport CascaderSteps from './steps.vue';\nimport config from '../config';\nimport CascaderProps from './props';\nimport { useEmitEvent, useVModel, renderTNode, TNode } from '../shared';\nimport CascaderItem from './cascader-item.vue';\n\nconst { prefix } = config;\nconst name = `${prefix}-cascader`;\n\nexport default defineComponent({\n  name,\n  components: { CloseIcon, CascaderItem, TNode, CascaderSteps },\n  props: CascaderProps,\n  emits: ['change', 'cancel', 'pick', 'click-tab', 'update:modelValue', 'update:value'],\n  setup(props: any, context: SetupContext) {\n    const emitEvent = useEmitEvent(props, context.emit);\n    const { value, modelValue } = toRefs(props);\n    const [cascaderValue, setCascaderValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const title = computed(() => props.title || '标题');\n    const closeIcon = computed(() => props.closeIcon || false);\n    const stepIndex = ref(0);\n    const selectedIndexes = reactive<number[]>([]);\n    const items = reactive<TdCascaderItems[]>([props.options]);\n    const steps = reactive(['选择选项']);\n    const onCancel = (e: MouseEvent) => {\n      emitEvent('cancel', { e });\n    };\n\n    const onStepsChange = (index: number) => {\n      stepIndex.value = index;\n      emitEvent('click-tab', index);\n    };\n\n    const internalInstance = getCurrentInstance();\n    const closeBtnTNode = computed(() => {\n      return renderTNode(internalInstance, 'closeIcon');\n    });\n    const titleTNode = computed(() => renderTNode(internalInstance, 'title'));\n\n    const onPick = (item: TdCascaderItem, index: number, level: number, e: MouseEvent) => {\n      if (item.disabled) {\n        return;\n      }\n      selectedIndexes[level] = index;\n      selectedIndexes.length = level + 1;\n      steps[level] = item.label;\n\n      emitEvent('pick', item.value, index, { e });\n\n      if (item?.children?.length) {\n        items[level + 1] = item.children;\n        items.length = level + 2;\n        stepIndex.value += 1;\n        steps[level + 1] = '选择选项';\n        steps.length = level + 2;\n      } else {\n        setCascaderValue(item.value);\n        emitEvent(\n          'change',\n          item.value,\n          items.map((item, index) => toRaw(item[selectedIndexes[index]])),\n          { e },\n        );\n      }\n    };\n\n    return {\n      closeBtnTNode,\n      titleTNode,\n      stepIndex,\n      name,\n      title,\n      closeIcon,\n      cascaderValue,\n      steps,\n      selectedIndexes,\n      items,\n      setCascaderValue,\n      emitEvent,\n      onCancel,\n      onPick,\n      onStepsChange,\n    };\n  },\n});\n</script>\n"],"names":["prefix","config","name","defineComponent","components","CloseIcon","CascaderItem","TNode","CascaderSteps","props","CascaderProps","emits","setup","context","emitEvent","useEmitEvent","emit","toRefs","value","modelValue","useVModel","defaultValue","onChange","_slicedToArray","cascaderValue","setCascaderValue","title","computed","closeIcon","stepIndex","ref","selectedIndexes","reactive","items","options","steps","onCancel","e","onStepsChange","index","internalInstance","getCurrentInstance","closeBtnTNode","renderTNode","titleTNode","onPick","item","level","disabled","length","label","children","map","toRaw","_hoisted_1","style","_createElementBlock","class","_ctx","_createElementVNode","_createBlock","_component_t_node","content","_Fragment","key","onClick","_component_close_icon","size","_createVNode","_component_cascader_steps","_openBlock","_renderList","_Transition","appear","_withDirectives","idx","_component_cascader_item","_mergeProps","active","$event","_vShow"],"mappings":"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"}