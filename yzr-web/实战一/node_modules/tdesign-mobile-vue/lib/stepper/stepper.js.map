{"version":3,"file":"stepper.js","sources":["../../src/stepper/stepper.vue","../../src/stepper/stepper.vue?vue&type=template&id=5defe7fc&lang.js"],"sourcesContent":["<template>\n  <div :class=\"[`${name}`, `${disabled ? disabledClass : ''}`, `${isPureMode ? `${name}__pure` : ''}`]\">\n    <div :class=\"[`${name}__minus`, `${disabled || stepperValue <= min ? 't-is-disabled' : ''}`]\" @click=\"minusValue\">\n      <remove-icon :class=\"`${name}__icon`\" />\n    </div>\n    <input\n      v-model=\"stepperValue\"\n      :class=\"`${name}__input`\"\n      type=\"tel\"\n      :style=\"inputStyle\"\n      :disabled=\"disableInput || disabled\"\n      :readonly=\"disableInput\"\n      @blur=\"handleBlur\"\n      @input=\"handleInput\"\n    />\n    <div :class=\"[`${name}__plus`, `${disabled || stepperValue >= max ? 't-is-disabled' : ''}`]\" @click=\"plusValue\">\n      <add-icon :class=\"`${name}__icon`\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { toRefs, computed, defineComponent, SetupContext, nextTick } from 'vue';\nimport { AddIcon, RemoveIcon } from 'tdesign-icons-vue-next';\nimport config from '../config';\nimport StepperProps from './props';\nimport CLASSNAMES from '../shared/constants';\nimport { useDefault, useEmitEvent } from '../shared';\nimport { TdStepperProps } from './type';\n\nconst { prefix } = config;\nconst name = `${prefix}-stepper`;\nconst disabledClass = CLASSNAMES.STATUS.disabled;\nexport default defineComponent({\n  name,\n  components: {\n    AddIcon,\n    RemoveIcon,\n  },\n  props: StepperProps,\n  emits: ['update:value', 'update:modelValue', 'blur', 'change', 'overlimit'],\n  setup(props, context: SetupContext) {\n    const [stepperValue] = useDefault<number, TdStepperProps>(props, context.emit, 'value', 'change');\n    const emitEvent = useEmitEvent(props, context.emit);\n\n    const { min, max, step, inputWidth, theme, disabled } = toRefs(props);\n    const isPureMode = computed(() => theme.value === 'grey');\n    const inputStyle = computed(() => (inputWidth ? { width: `${inputWidth.value}px` } : ''));\n\n    const isDisabled = (type: 'minus' | 'plus') => {\n      if (disabled.value) return true;\n      if (type === 'minus' && stepperValue.value <= min.value) {\n        return true;\n      }\n      if (type === 'plus' && stepperValue.value >= max.value) {\n        return true;\n      }\n      return false;\n    };\n\n    const formatValue = (value: number) =>\n      Math.max(Math.min(max.value, value, Number.MAX_SAFE_INTEGER), min.value, Number.MIN_SAFE_INTEGER);\n\n    const updateValue = (value: number) => {\n      stepperValue.value = formatValue(value);\n    };\n\n    const plusValue = () => {\n      if (isDisabled('plus')) {\n        emitEvent('overlimit', 'plus');\n        return;\n      }\n      updateValue(Number(stepperValue.value) + step.value);\n    };\n\n    const minusValue = () => {\n      if (isDisabled('minus')) {\n        emitEvent('overlimit', 'minus');\n        return;\n      }\n      updateValue(Number(stepperValue.value) - step.value);\n    };\n\n    const handleInput = (e: Event) => {\n      handleChange(e);\n    };\n\n    const handleChange = (e: Event) => {\n      const value = (e.target as HTMLTextAreaElement).value.match(/^\\d+\\.\\d+|^\\d+/g);\n      if (isNaN(Number(value))) return;\n      const formattedValue = formatValue(Number(value));\n      updateValue(Number(formattedValue));\n    };\n\n    const handleBlur = (e: FocusEvent) => {\n      handleChange(e);\n      emitEvent('blur', stepperValue.value);\n    };\n\n    return {\n      name,\n      disabledClass,\n      minusValue,\n      stepperValue,\n      plusValue,\n      handleInput,\n      handleChange,\n      inputStyle,\n      handleBlur,\n      isPureMode,\n      ...toRefs(props),\n    };\n  },\n});\n</script>\n","<template>\n  <div :class=\"[`${name}`, `${disabled ? disabledClass : ''}`, `${isPureMode ? `${name}__pure` : ''}`]\">\n    <div :class=\"[`${name}__minus`, `${disabled || stepperValue <= min ? 't-is-disabled' : ''}`]\" @click=\"minusValue\">\n      <remove-icon :class=\"`${name}__icon`\" />\n    </div>\n    <input\n      v-model=\"stepperValue\"\n      :class=\"`${name}__input`\"\n      type=\"tel\"\n      :style=\"inputStyle\"\n      :disabled=\"disableInput || disabled\"\n      :readonly=\"disableInput\"\n      @blur=\"handleBlur\"\n      @input=\"handleInput\"\n    />\n    <div :class=\"[`${name}__plus`, `${disabled || stepperValue >= max ? 't-is-disabled' : ''}`]\" @click=\"plusValue\">\n      <add-icon :class=\"`${name}__icon`\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { toRefs, computed, defineComponent, SetupContext, nextTick } from 'vue';\nimport { AddIcon, RemoveIcon } from 'tdesign-icons-vue-next';\nimport config from '../config';\nimport StepperProps from './props';\nimport CLASSNAMES from '../shared/constants';\nimport { useDefault, useEmitEvent } from '../shared';\nimport { TdStepperProps } from './type';\n\nconst { prefix } = config;\nconst name = `${prefix}-stepper`;\nconst disabledClass = CLASSNAMES.STATUS.disabled;\nexport default defineComponent({\n  name,\n  components: {\n    AddIcon,\n    RemoveIcon,\n  },\n  props: StepperProps,\n  emits: ['update:value', 'update:modelValue', 'blur', 'change', 'overlimit'],\n  setup(props, context: SetupContext) {\n    const [stepperValue] = useDefault<number, TdStepperProps>(props, context.emit, 'value', 'change');\n    const emitEvent = useEmitEvent(props, context.emit);\n\n    const { min, max, step, inputWidth, theme, disabled } = toRefs(props);\n    const isPureMode = computed(() => theme.value === 'grey');\n    const inputStyle = computed(() => (inputWidth ? { width: `${inputWidth.value}px` } : ''));\n\n    const isDisabled = (type: 'minus' | 'plus') => {\n      if (disabled.value) return true;\n      if (type === 'minus' && stepperValue.value <= min.value) {\n        return true;\n      }\n      if (type === 'plus' && stepperValue.value >= max.value) {\n        return true;\n      }\n      return false;\n    };\n\n    const formatValue = (value: number) =>\n      Math.max(Math.min(max.value, value, Number.MAX_SAFE_INTEGER), min.value, Number.MIN_SAFE_INTEGER);\n\n    const updateValue = (value: number) => {\n      stepperValue.value = formatValue(value);\n    };\n\n    const plusValue = () => {\n      if (isDisabled('plus')) {\n        emitEvent('overlimit', 'plus');\n        return;\n      }\n      updateValue(Number(stepperValue.value) + step.value);\n    };\n\n    const minusValue = () => {\n      if (isDisabled('minus')) {\n        emitEvent('overlimit', 'minus');\n        return;\n      }\n      updateValue(Number(stepperValue.value) - step.value);\n    };\n\n    const handleInput = (e: Event) => {\n      handleChange(e);\n    };\n\n    const handleChange = (e: Event) => {\n      const value = (e.target as HTMLTextAreaElement).value.match(/^\\d+\\.\\d+|^\\d+/g);\n      if (isNaN(Number(value))) return;\n      const formattedValue = formatValue(Number(value));\n      updateValue(Number(formattedValue));\n    };\n\n    const handleBlur = (e: FocusEvent) => {\n      handleChange(e);\n      emitEvent('blur', stepperValue.value);\n    };\n\n    return {\n      name,\n      disabledClass,\n      minusValue,\n      stepperValue,\n      plusValue,\n      handleInput,\n      handleChange,\n      inputStyle,\n      handleBlur,\n      isPureMode,\n      ...toRefs(props),\n    };\n  },\n});\n</script>\n"],"names":["prefix","config","name","disabledClass","CLASSNAMES","STATUS","disabled","defineComponent","components","AddIcon","RemoveIcon","props","StepperProps","emits","setup","context","useDefault","emit","_slicedToArray","stepperValue","emitEvent","useEmitEvent","toRefs","min","max","step","inputWidth","theme","isPureMode","computed","value","inputStyle","width","isDisabled","type","formatValue","Math","Number","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","updateValue","plusValue","minusValue","handleInput","e","handleChange","target","match","isNaN","formattedValue","handleBlur","_createElementBlock","class","_normalizeClass","_ctx","_createElementVNode","onClick","_createVNode","_component_remove_icon","$event","style","readonly","disableInput","onBlur","onInput","_component_add_icon"],"mappings":"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"}