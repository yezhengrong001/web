{"version":3,"file":"index.js","sources":["../../../src/shared/useScrollParent/index.ts"],"sourcesContent":["import { ref, Ref, onMounted } from 'vue';\nimport { inBrowser } from '../util';\n\ntype ScrollElement = HTMLElement | Window;\n\nconst overflowScrollReg = /scroll|auto/i;\nconst defaultRoot = inBrowser ? window : undefined;\n\nfunction isElement(node: Element) {\n  const ELEMENT_NODE_TYPE = 1;\n  return node.tagName !== 'HTML' && node.tagName !== 'BODY' && node.nodeType === ELEMENT_NODE_TYPE;\n}\n\nexport function getScrollParent(el: Element, root: ScrollElement | undefined = defaultRoot) {\n  let node = el;\n\n  while (node && node !== root && isElement(node)) {\n    const { overflowY } = window.getComputedStyle(node);\n    if (overflowScrollReg.test(overflowY)) {\n      return node;\n    }\n    node = node.parentNode as Element;\n  }\n\n  return root;\n}\n\nexport function useScrollParent(el: Ref<Element | undefined>, root: ScrollElement | undefined = defaultRoot) {\n  const scrollParent = ref<Element | Window>();\n\n  onMounted(() => {\n    if (el.value) {\n      scrollParent.value = getScrollParent(el.value, root);\n    }\n  });\n\n  return scrollParent;\n}\n"],"names":["overflowScrollReg","defaultRoot","inBrowser","window","isElement","node","ELEMENT_NODE_TYPE","tagName","nodeType","getScrollParent","el","root","getComputedStyle","overflowY","test","parentNode","useScrollParent","scrollParent","ref","onMounted","value"],"mappings":";;;;;;;;;;;;;AAKA,IAAMA,iBAAoB,GAAA,cAAA,CAAA;AAC1B,IAAMC,WAAA,GAAcC,wBAAYC,MAAS,GAAA,KAAA,CAAA,CAAA;AAEzC,SAASC,UAAUC,IAAe,EAAA;EAChC,IAAMC,iBAAoB,GAAA,CAAA,CAAA;AAC1B,EAAA,OAAOD,KAAKE,OAAY,KAAA,MAAA,IAAUF,KAAKE,OAAY,KAAA,MAAA,IAAUF,KAAKG,QAAa,KAAAF,iBAAA,CAAA;AACjF,CAAA;AAEgB,SAAAG,eAAA,CAAgBC,EAAa,EAA+C;EAAA,IAA/CC,IAAA,uEAAkCV,WAAa,CAAA;EAC1F,IAAII,IAAO,GAAAK,EAAA,CAAA;EAEX,OAAOL,IAAQ,IAAAA,IAAA,KAASM,IAAQ,IAAAP,SAAA,CAAUC,IAAI,CAAG,EAAA;AAC/C,IAAA,IAAA,qBAAA,GAAsBF,MAAA,CAAOS,iBAAiBP,IAAI,CAAA;AAA1CQ,MAAAA,SAAA,yBAAAA,SAAA,CAAA;AACJ,IAAA,IAAAb,iBAAA,CAAkBc,IAAK,CAAAD,SAAS,CAAG,EAAA;AAC9B,MAAA,OAAAR,IAAA,CAAA;AACT,KAAA;IACAA,IAAA,GAAOA,IAAK,CAAAU,UAAA,CAAA;AACd,GAAA;AAEO,EAAA,OAAAJ,IAAA,CAAA;AACT,CAAA;AAEgB,SAAAK,eAAA,CAAgBN,EAA8B,EAA+C;EAAA,IAA/CC,IAAA,uEAAkCV,WAAa,CAAA;EAC3G,IAAMgB,eAAeC,OAAsB,EAAA,CAAA;AAE3CC,EAAAA,aAAA,CAAU,YAAM;IACd,IAAIT,GAAGU,KAAO,EAAA;MACZH,YAAA,CAAaG,KAAQ,GAAAX,eAAA,CAAgBC,EAAG,CAAAU,KAAA,EAAOT,IAAI,CAAA,CAAA;AACrD,KAAA;AACF,GAAC,CAAA,CAAA;AAEM,EAAA,OAAAM,YAAA,CAAA;AACT;;;;;"}