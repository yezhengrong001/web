{"version":3,"file":"collapse.js","sources":["../../src/collapse/collapse.vue","../../src/collapse/collapse.vue?vue&type=template&id=c60a6ee0&lang.js"],"sourcesContent":["<template>\n  <div :class=\"classPrefix\">\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { toRefs, provide, SetupContext, defineComponent, computed, Ref, ComputedRef } from 'vue';\nimport props from './props';\nimport config from '../config';\nimport { toggleElem } from './util';\nimport { useEmitEvent, useVModel } from '../shared';\nimport { CollapseValue, TdCollapseProps } from './type';\n\nexport interface CollapseProvide {\n  activeValue: Ref<CollapseValue | undefined>;\n  disabled: ComputedRef<boolean>;\n  expandIcon: ComputedRef<TdCollapseProps['expandIcon']>;\n  onPanelChange: (name: string | number) => void;\n  defaultExpandAll: boolean;\n}\n\nconst { prefix } = config;\nconst name = `${prefix}-collapse`;\nexport default defineComponent({\n  name,\n  props,\n  emits: ['update:value', 'change'],\n  setup(props) {\n    const { value, modelValue } = toRefs(props);\n    const [activeValue, setActiveValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const calcActiveValues = (activeValues: any[], panelValue: any, expandMutex: boolean) => {\n      const hit = activeValues.indexOf(panelValue);\n\n      if (hit > -1) {\n        return activeValues.filter((item) => item !== panelValue);\n      }\n\n      return expandMutex ? [panelValue] : activeValues.concat(panelValue);\n    };\n\n    const onPanelChange = (value: string | number) => {\n      if (Array.isArray(activeValue.value)) {\n        const val = calcActiveValues(activeValue.value, value, props.expandMutex);\n\n        setActiveValue(val);\n      }\n    };\n\n    const disabled = computed(() => props.disabled);\n    const expandIcon = computed(() => props.expandIcon);\n\n    provide<CollapseProvide>('collapse', {\n      activeValue,\n      disabled,\n      expandIcon,\n      onPanelChange,\n      defaultExpandAll: props.defaultExpandAll,\n    });\n\n    return {\n      prefix,\n      classPrefix: name,\n      activeValue,\n    };\n  },\n});\n</script>\n\n<style></style>\n","<template>\n  <div :class=\"classPrefix\">\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { toRefs, provide, SetupContext, defineComponent, computed, Ref, ComputedRef } from 'vue';\nimport props from './props';\nimport config from '../config';\nimport { toggleElem } from './util';\nimport { useEmitEvent, useVModel } from '../shared';\nimport { CollapseValue, TdCollapseProps } from './type';\n\nexport interface CollapseProvide {\n  activeValue: Ref<CollapseValue | undefined>;\n  disabled: ComputedRef<boolean>;\n  expandIcon: ComputedRef<TdCollapseProps['expandIcon']>;\n  onPanelChange: (name: string | number) => void;\n  defaultExpandAll: boolean;\n}\n\nconst { prefix } = config;\nconst name = `${prefix}-collapse`;\nexport default defineComponent({\n  name,\n  props,\n  emits: ['update:value', 'change'],\n  setup(props) {\n    const { value, modelValue } = toRefs(props);\n    const [activeValue, setActiveValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const calcActiveValues = (activeValues: any[], panelValue: any, expandMutex: boolean) => {\n      const hit = activeValues.indexOf(panelValue);\n\n      if (hit > -1) {\n        return activeValues.filter((item) => item !== panelValue);\n      }\n\n      return expandMutex ? [panelValue] : activeValues.concat(panelValue);\n    };\n\n    const onPanelChange = (value: string | number) => {\n      if (Array.isArray(activeValue.value)) {\n        const val = calcActiveValues(activeValue.value, value, props.expandMutex);\n\n        setActiveValue(val);\n      }\n    };\n\n    const disabled = computed(() => props.disabled);\n    const expandIcon = computed(() => props.expandIcon);\n\n    provide<CollapseProvide>('collapse', {\n      activeValue,\n      disabled,\n      expandIcon,\n      onPanelChange,\n      defaultExpandAll: props.defaultExpandAll,\n    });\n\n    return {\n      prefix,\n      classPrefix: name,\n      activeValue,\n    };\n  },\n});\n</script>\n\n<style></style>\n"],"names":["prefix","config","name","defineComponent","props","emits","setup","toRefs","value","modelValue","useVModel","defaultValue","onChange","_slicedToArray","activeValue","setActiveValue","calcActiveValues","activeValues","panelValue","expandMutex","hit","indexOf","filter","item","concat","onPanelChange","Array","isArray","val","disabled","computed","expandIcon","provide","defaultExpandAll","classPrefix","_createElementBlock","class","_ctx","_renderSlot","$slots"],"mappings":";;;;;;;;;;;;;;;;;;;;AAsBA,IAAQA,SAAWC,iBAAA,CAAXD;AACR,IAAME,OAAUF,EAAAA,CAAAA,MAAAA,CAAAA,MAAA,EAAA,WAAA,CAAA,CAAA;AAChB,aAAeG,mBAAgB,CAAA;AAC7BD,EAAAA,IAAA,EAAAA,IAAA;AACAE,EAAAA,KAAA,EAAAA,yBAAA;AACAC,EAAAA,KAAA,EAAO,CAAC,cAAA,EAAgB,QAAQ,CAAA;EAChCC,sBAAMF,MAAO,EAAA;IACX,IAA8BG,OAAAA,GAAAA,WAAOH,MAAK,CAAA;AAAlCI,MAAAA,KAAA,WAAAA,KAAA;AAAOC,MAAAA,UAAW,WAAXA,UAAW,CAAA;AACpB,IAAA,IAAA,UAAA,GAAgCC,gCAAA,CAAUF,OAAOC,UAAYL,EAAAA,MAAAA,CAAMO,YAAcP,EAAAA,MAAAA,CAAMQ,QAAQ,CAAA;AAAA,MAAA,WAAA,GAAAC,kCAAA,CAAA,UAAA,EAAA,CAAA,CAAA;MAA9FC,WAAa,GAAA,WAAA,CAAA,CAAA,CAAA;MAAAC,cAAc,GAAA,WAAA,CAAA,CAAA,CAAA,CAAA;IAClC,IAAMC,gBAAmB,GAAA,SAAnBA,gBAAmB,CAACC,YAAqB,EAAAC,UAAA,EAAiBC,WAAyB,EAAA;AACjF,MAAA,IAAAC,GAAA,GAAMH,YAAa,CAAAI,OAAA,CAAQH,UAAU,CAAA,CAAA;AAE3C,MAAA,IAAIE,MAAM,CAAI,CAAA,EAAA;AACZ,QAAA,OAAOH,YAAa,CAAAK,MAAA,CAAO,UAACC,IAAA,EAAA;UAAA,OAASA,SAASL,UAAU,CAAA;SAAA,CAAA,CAAA;AAC1D,OAAA;MAEA,OAAOC,cAAc,CAACD,UAAU,CAAI,GAAAD,YAAA,CAAaO,OAAON,UAAU,CAAA,CAAA;KACpE,CAAA;AAEM,IAAA,IAAAO,aAAA,GAAgB,SAAhBA,aAAA,CAAiBjB,MAA2B,EAAA;MAChD,IAAIkB,KAAM,CAAAC,OAAA,CAAQb,WAAY,CAAAN,KAAK,CAAG,EAAA;AACpC,QAAA,IAAMoB,MAAMZ,gBAAiB,CAAAF,WAAA,CAAYN,KAAOA,EAAAA,MAAAA,EAAOJ,OAAMe,WAAW,CAAA,CAAA;QAExEJ,cAAA,CAAea,GAAG,CAAA,CAAA;AACpB,OAAA;KACF,CAAA;IAEA,IAAMC,QAAW,GAAAC,YAAA,CAAS,YAAA;MAAA,OAAM1B,MAAAA,CAAMyB,QAAQ,CAAA;KAAA,CAAA,CAAA;IAC9C,IAAME,UAAa,GAAAD,YAAA,CAAS,YAAA;MAAA,OAAM1B,MAAAA,CAAM2B,UAAU,CAAA;KAAA,CAAA,CAAA;IAElDC,WAAA,CAAyB,UAAY,EAAA;AACnClB,MAAAA,WAAA,EAAAA,WAAA;AACAe,MAAAA,QAAA,EAAAA,QAAA;AACAE,MAAAA,UAAA,EAAAA,UAAA;AACAN,MAAAA,aAAA,EAAAA,aAAA;MACAQ,kBAAkB7B,MAAM,CAAA6B,gBAAAA;AAC1B,KAAC,CAAA,CAAA;IAEM,OAAA;AACLjC,MAAAA,MAAA,EAAAA,MAAA;AACAkC,MAAAA,WAAa,EAAAhC,IAAA;AACbY,MAAAA,WAAA,EAAAA,WAAAA;KACF,CAAA;AACF,GAAA;AACF,CAAC,CAAA;;;wBCjEC,EAAAqB,sBAAA,CAEK,KAAA,EAAA;AAFCC,IAAAA,KAAA,oBAAO,CAAAC,IAAA,CAAWH,WAAA,CAAA;MACtBI,cAAA,CAAYD,IAAA,CAAAE,MAAA,EAAA,SAAA,CAAA;;;;;;;"}