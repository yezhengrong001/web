/**
 * tdesign v0.12.1
 * (c) 2022 TDesign Group
 * @license MIT
 */

import _defineProperty from '@babel/runtime/helpers/defineProperty';
import { defineComponent, getCurrentInstance, computed, ref, watch, toRefs, resolveComponent, openBlock, createBlock, withCtx, createElementVNode, normalizeClass, normalizeStyle, renderSlot, createElementBlock, toDisplayString, createCommentVNode, createVNode, Fragment, renderList, mergeProps } from 'vue';
import _Button from '../button/index.js';
import _Popup from '../popup/index.js';
import config from '../config.js';
import DialogProps from './props.js';
import '../shared/index.js';
import TNodeComponent from '../shared/render-tnode.js';
import { renderContent } from '../shared/render.js';
import '../button/button.js';
import 'tdesign-icons-vue-next';
import '../shared/constants.js';
import '../button/props.js';
import '../shared/useEmitEvent/index.js';
import 'lodash/camelCase';
import '../shared/functions.js';
import '../shared/util.js';
import '../shared/component.js';
import '../shared/useToggle/index.js';
import '../shared/useCountDown/index.js';
import '@babel/runtime/helpers/asyncToGenerator';
import '@babel/runtime/regenerator';
import '@vueuse/core';
import '../shared/useCountDown/utils.js';
import '../shared/useDefault/index.js';
import '../shared/useChildSlots/index.js';
import '@babel/runtime/helpers/toConsumableArray';
import '../shared/useVModel/index.js';
import '../shared/useTouch/index.js';
import '../shared/useScrollParent/index.js';
import '../shared/useExpose/index.js';
import '@babel/runtime/helpers/typeof';
import './style/css.js';
import '../button/type.js';
import '../popup/popup.js';
import '@babel/runtime/helpers/slicedToArray';
import '../popup/props.js';
import '../overlay/index.js';
import '../overlay/overlay.js';
import '../overlay/props.js';
import '../popup/type.js';

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
var prefix = config.prefix;
var name = "".concat(prefix, "-dialog");
var script = defineComponent({
  name: name,
  components: {
    TPopup: _Popup,
    TNode: TNodeComponent,
    TButton: _Button
  },
  props: DialogProps,
  emits: ["update:visible", "confirm", "overlay-click", "cancel", "change", "close"],
  setup: function setup(props, context) {
    var internalInstance = getCurrentInstance();
    var dialogContent = computed(function () {
      return renderContent(internalInstance, "default", "content");
    });
    var innerValue = ref("");
    var dClassName = computed(function () {
      return "".concat(name);
    });
    var dBoxClassName = computed(function () {
      return "".concat(name, "__box");
    });
    var dHeaderClassName = computed(function () {
      return ["".concat(name, "__header"), _defineProperty({}, "".concat(name, "__header--has-content"), dialogContent)];
    });
    var dTitleClassName = computed(function () {
      return "".concat(name, "__title");
    });
    var dBodyClassName = computed(function () {
      return "".concat(name, "__body");
    });
    var dTextClassName = computed(function () {
      return "".concat(name, "__text");
    });
    var dInputClassName = computed(function () {
      return "".concat(name, "__input");
    });
    var dFooterClassName = computed(function () {
      return [_defineProperty({}, "".concat(name, "__vertical-footer"), props.buttonLayout === "vertical"), "".concat(name, "__footer")];
    });
    var dDefaultBtnClassName = computed(function () {
      return ["".concat(name, "__btn"), "".concat(name, "__btn--default"), "".concat(name, "__").concat(props.buttonLayout, "-btn")];
    });
    var dConfirmBtnClassName = computed(function () {
      return ["".concat(name, "__btn"), "".concat(name, "__btn--primary"), "".concat(name, "__").concat(props.buttonLayout, "-btn")];
    });
    var rootStyles = computed(function () {
      return {
        zIndex: props.zIndex,
        width: typeof props.width === "string" ? props.width : "".concat(props.width, "px")
      };
    });
    var handleConfirm = function handleConfirm() {
      context.emit("update:visible", false);
      context.emit("confirm");
    };
    var handleCancel = function handleCancel() {
      context.emit("update:visible", false);
      context.emit("close", "cancel");
      context.emit("cancel");
    };
    var handleOverlayClick = function handleOverlayClick() {
      if (!props.closeOnOverlayClick) {
        return;
      }
      context.emit("update:visible", false);
      context.emit("close", "overlay");
      context.emit("overlay-click");
    };
    watch(function () {
      return props.visible;
    }, function (val) {
      context.emit("change", val);
    });
    var calcBtn = function calcBtn(btn) {
      return typeof btn === "string" ? {
        content: btn
      } : btn;
    };
    var confirmBtnProps = computed(function () {
      return calcBtn(props.confirmBtn);
    });
    var cancelBtnProps = computed(function () {
      return calcBtn(props.cancelBtn);
    });
    var actionsBtnProps = computed(function () {
      var _props$actions;
      return (_props$actions = props.actions) === null || _props$actions === void 0 ? void 0 : _props$actions.map(function (item) {
        return calcBtn(item);
      });
    });
    return _objectSpread({
      innerValue: innerValue,
      dClassName: dClassName,
      dBoxClassName: dBoxClassName,
      dHeaderClassName: dHeaderClassName,
      dTitleClassName: dTitleClassName,
      dBodyClassName: dBodyClassName,
      dTextClassName: dTextClassName,
      dInputClassName: dInputClassName,
      dFooterClassName: dFooterClassName,
      dDefaultBtnClassName: dDefaultBtnClassName,
      dConfirmBtnClassName: dConfirmBtnClassName,
      dialogContent: dialogContent,
      confirmBtnProps: confirmBtnProps,
      cancelBtnProps: cancelBtnProps,
      actionsBtnProps: actionsBtnProps,
      handleConfirm: handleConfirm,
      handleCancel: handleCancel,
      handleOverlayClick: handleOverlayClick,
      rootStyles: rootStyles
    }, toRefs(props));
  }
});

function render(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_t_node = resolveComponent("t-node");
  var _component_t_button = resolveComponent("t-button");
  var _component_t_popup = resolveComponent("t-popup");
  return openBlock(), createBlock(_component_t_popup, {
    visible: _ctx.visible,
    placement: "center",
    "mask-transparent": !_ctx.showOverlay,
    "teleport-disabled": true,
    "lock-scroll": _ctx.preventScrollThrough,
    onClose: _ctx.handleOverlayClick
  }, {
    default: withCtx(function () {
      return [createElementVNode("div", {
        id: "root",
        class: normalizeClass(_ctx.dClassName),
        style: normalizeStyle(_ctx.rootStyles)
      }, [createElementVNode("div", {
        class: normalizeClass(_ctx.dHeaderClassName)
      }, [renderSlot(_ctx.$slots, "header", {}, function () {
        return [_ctx.title ? (openBlock(), createElementBlock("div", {
          key: 0,
          class: normalizeClass(_ctx.dTitleClassName)
        }, toDisplayString(_ctx.title), 3)) : createCommentVNode("", true)];
      })], 2), _ctx.content ? (openBlock(), createElementBlock("div", {
        key: 0,
        class: normalizeClass(_ctx.dBodyClassName)
      }, [createElementVNode("div", {
        class: normalizeClass(_ctx.dTextClassName)
      }, [createVNode(_component_t_node, {
        content: _ctx.dialogContent
      }, null, 8, ["content"])], 2)], 2)) : createCommentVNode("", true), createElementVNode("div", {
        class: normalizeClass(_ctx.dFooterClassName)
      }, [renderSlot(_ctx.$slots, "actions", {}, function () {
        return [_ctx.actionsBtnProps ? (openBlock(true), createElementBlock(Fragment, {
          key: 0
        }, renderList(_ctx.actionsBtnProps, function (item, index) {
          return openBlock(), createBlock(_component_t_button, mergeProps({
            key: index
          }, item, {
            variant: "text",
            class: _ctx.dDefaultBtnClassName,
            onClick: _ctx.handleCancel
          }), null, 16, ["class", "onClick"]);
        }), 128)) : createCommentVNode("", true)];
      }), renderSlot(_ctx.$slots, "cancelBtn", {}, function () {
        return [_ctx.cancelBtn ? (openBlock(), createBlock(_component_t_button, mergeProps({
          key: 0
        }, _ctx.cancelBtnProps, {
          variant: "text",
          class: _ctx.dDefaultBtnClassName,
          onClick: _ctx.handleCancel
        }), null, 16, ["class", "onClick"])) : createCommentVNode("", true)];
      }), renderSlot(_ctx.$slots, "confirmBtn", {}, function () {
        return [_ctx.confirmBtn ? (openBlock(), createBlock(_component_t_button, mergeProps({
          key: 0
        }, _ctx.confirmBtnProps, {
          variant: "text",
          class: _ctx.dConfirmBtnClassName,
          onClick: _ctx.handleConfirm
        }), null, 16, ["class", "onClick"])) : createCommentVNode("", true)];
      })], 2)], 6)];
    }),
    _: 3
  }, 8, ["visible", "mask-transparent", "lock-scroll", "onClose"]);
}

script.render = render;

export { script as default };
//# sourceMappingURL=dialog.js.map
