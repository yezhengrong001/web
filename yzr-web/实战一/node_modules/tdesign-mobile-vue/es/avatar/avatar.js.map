{"version":3,"file":"avatar.js","sources":["../../src/avatar/avatar.vue","../../src/avatar/avatar.vue?vue&type=template&id=18ad6f4c&lang.js"],"sourcesContent":["<template>\n  <div :class=\"avatarClass\" :style=\"customSize\">\n    <div :class=\"`${name}__inner`\">\n      <img v-if=\"image && !hideOnLoadFailed\" :src=\"image\" :alt=\"alt\" :style=\"customSize\" @error=\"handleImgLoadError\" />\n      <div v-else-if=\"iconContent !== undefined\" :class=\"`${name}__icon`\">\n        <t-node :content=\"iconContent\"></t-node>\n      </div>\n      <span v-else>\n        <t-node :content=\"avatarContent\"></t-node>\n      </span>\n    </div>\n    <div v-if=\"badgeProps\" :class=\"`${name}__badge`\">\n      <t-badge\n        :count=\"badgeProps.count\"\n        :max-count=\"badgeProps.maxCount\"\n        :dot=\"badgeProps.dot\"\n        :content=\"badgeProps.content\"\n        :size=\"badgeProps.size\"\n        :offset=\"badgeProps.offset\"\n      >\n      </t-badge>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, toRefs, defineComponent, getCurrentInstance, inject, ref, SetupContext } from 'vue';\nimport TBadge from '../badge';\nimport config from '../config';\nimport AvatarProps from './props';\nimport { TdAvatarGroupProps } from './type';\nimport CLASSNAMES from '../shared/constants';\nimport { renderContent, renderTNode, TNode, useEmitEvent } from '../shared';\n\nconst { prefix } = config;\nconst name = `${prefix}-avatar`;\n\nexport default defineComponent({\n  name,\n  components: { TNode, TBadge },\n  props: AvatarProps,\n  emits: ['error'],\n  setup(props, context: SetupContext) {\n    const emitEvent = useEmitEvent(props, context.emit);\n    const internalInstance = getCurrentInstance();\n    const avatarGroupProps = inject('avatarGroup', {}) as TdAvatarGroupProps;\n    const avatarContent = computed(() => renderContent(internalInstance, 'default', 'content'));\n    const iconContent = computed(() => renderTNode(internalInstance, 'icon'));\n    const sizeValue = ref(props.size || (avatarGroupProps && avatarGroupProps.size));\n    const avatarClass = computed(() => [\n      `${name}`,\n      sizeValue.value ? CLASSNAMES.SIZE[sizeValue.value] : '',\n      {\n        [`${name}--${props.shape}`]: props.shape,\n      },\n    ]);\n\n    const isCustomSize = computed(() => sizeValue.value && !CLASSNAMES.SIZE[sizeValue.value]);\n    const customSize = computed(() => {\n      return isCustomSize.value\n        ? {\n            height: sizeValue.value,\n            width: sizeValue.value,\n          }\n        : {};\n    });\n    const handleImgLoadError = (e: Event) => {\n      emitEvent('error', e);\n    };\n\n    return {\n      name,\n      ...toRefs(props),\n      avatarContent,\n      iconContent,\n      avatarClass,\n      customSize,\n      handleImgLoadError,\n    };\n  },\n});\n</script>\n","<template>\n  <div :class=\"avatarClass\" :style=\"customSize\">\n    <div :class=\"`${name}__inner`\">\n      <img v-if=\"image && !hideOnLoadFailed\" :src=\"image\" :alt=\"alt\" :style=\"customSize\" @error=\"handleImgLoadError\" />\n      <div v-else-if=\"iconContent !== undefined\" :class=\"`${name}__icon`\">\n        <t-node :content=\"iconContent\"></t-node>\n      </div>\n      <span v-else>\n        <t-node :content=\"avatarContent\"></t-node>\n      </span>\n    </div>\n    <div v-if=\"badgeProps\" :class=\"`${name}__badge`\">\n      <t-badge\n        :count=\"badgeProps.count\"\n        :max-count=\"badgeProps.maxCount\"\n        :dot=\"badgeProps.dot\"\n        :content=\"badgeProps.content\"\n        :size=\"badgeProps.size\"\n        :offset=\"badgeProps.offset\"\n      >\n      </t-badge>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, toRefs, defineComponent, getCurrentInstance, inject, ref, SetupContext } from 'vue';\nimport TBadge from '../badge';\nimport config from '../config';\nimport AvatarProps from './props';\nimport { TdAvatarGroupProps } from './type';\nimport CLASSNAMES from '../shared/constants';\nimport { renderContent, renderTNode, TNode, useEmitEvent } from '../shared';\n\nconst { prefix } = config;\nconst name = `${prefix}-avatar`;\n\nexport default defineComponent({\n  name,\n  components: { TNode, TBadge },\n  props: AvatarProps,\n  emits: ['error'],\n  setup(props, context: SetupContext) {\n    const emitEvent = useEmitEvent(props, context.emit);\n    const internalInstance = getCurrentInstance();\n    const avatarGroupProps = inject('avatarGroup', {}) as TdAvatarGroupProps;\n    const avatarContent = computed(() => renderContent(internalInstance, 'default', 'content'));\n    const iconContent = computed(() => renderTNode(internalInstance, 'icon'));\n    const sizeValue = ref(props.size || (avatarGroupProps && avatarGroupProps.size));\n    const avatarClass = computed(() => [\n      `${name}`,\n      sizeValue.value ? CLASSNAMES.SIZE[sizeValue.value] : '',\n      {\n        [`${name}--${props.shape}`]: props.shape,\n      },\n    ]);\n\n    const isCustomSize = computed(() => sizeValue.value && !CLASSNAMES.SIZE[sizeValue.value]);\n    const customSize = computed(() => {\n      return isCustomSize.value\n        ? {\n            height: sizeValue.value,\n            width: sizeValue.value,\n          }\n        : {};\n    });\n    const handleImgLoadError = (e: Event) => {\n      emitEvent('error', e);\n    };\n\n    return {\n      name,\n      ...toRefs(props),\n      avatarContent,\n      iconContent,\n      avatarClass,\n      customSize,\n      handleImgLoadError,\n    };\n  },\n});\n</script>\n"],"names":["prefix","config","name","defineComponent","components","TNode","TBadge","props","AvatarProps","emits","setup","context","emitEvent","useEmitEvent","emit","internalInstance","getCurrentInstance","avatarGroupProps","inject","avatarContent","computed","renderContent","iconContent","renderTNode","sizeValue","ref","size","avatarClass","value","CLASSNAMES","SIZE","shape","isCustomSize","customSize","height","width","handleImgLoadError","e","toRefs","_createElementBlock","class","_ctx","style","_createElementVNode","image","hideOnLoadFailed","src","alt","onError","_createVNode","_component_t_node","content","_hoisted_2","badgeProps","_component_t_badge","count","maxCount","dot","offset"],"mappings":"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"}