{"version":3,"file":"index.js","sources":["../../src/message/index.ts"],"sourcesContent":["import { createApp, defineComponent, ref, h, VNode, App, nextTick } from 'vue';\nimport Message from './message.vue';\nimport { WithInstallType } from '../shared';\nimport { TdMessageProps, MessageThemeList } from './type';\n\nimport './style';\n\nfunction create(props: TdMessageProps): void {\n  const visible = ref(false);\n  const root = document.createElement('div');\n  document.body.appendChild(root);\n\n  const component = defineComponent({\n    render: (): VNode =>\n      // @ts-ignore\n      h(Message, {\n        ...props,\n        visible: visible.value,\n        onClose: () => {\n          visible.value = false;\n        },\n        onClosed: () => {\n          root.remove();\n        },\n      }),\n  });\n\n  createApp(component).mount(root);\n\n  nextTick(() => {\n    visible.value = true;\n  });\n}\n\nconst defaultProps: TdMessageProps = {\n  align: 'left',\n  closeBtn: '',\n  content: '',\n  duration: 3000,\n  theme: 'info',\n  visible: false,\n  zIndex: 5000,\n  onClose: () => {},\n  onClosed: () => {},\n  onOpen: () => {},\n  onOpened: () => {},\n  onChange: () => {},\n};\n\n(['info', 'success', 'warning', 'error'] as MessageThemeList[]).forEach((theme: MessageThemeList): void => {\n  Message[theme] = (options: TdMessageProps | string) => {\n    let props: TdMessageProps = {\n      ...defaultProps,\n      theme,\n    };\n\n    if (typeof options === 'string') {\n      props.content = options;\n    } else {\n      props = { ...props, ...options };\n    }\n\n    create(props);\n  };\n});\n\nMessage.install = (app: App, name = '') => {\n  app.component(name || Message.name, Message);\n\n  // 添加插件入口\n  // eslint-disable-next-line no-param-reassign\n  app.config.globalProperties.$message = Message;\n};\n\ntype MessageApi = {\n  /** 展示普通消息 */\n  info: (options?: TdMessageProps | string) => void;\n  /** 展示成功消息 */\n  success: (options?: TdMessageProps | string) => void;\n  /** 展示警示消息 */\n  warning: (options?: TdMessageProps | string) => void;\n  /** 展示错误消息 */\n  error: (options?: TdMessageProps | string) => void;\n};\n\nexport const MessagePlugin: WithInstallType<typeof Message> & MessageApi = Message as any;\nexport default MessagePlugin;\n\ndeclare module '@vue/runtime-core' {\n  // Bind to `this` keyword\n  export interface ComponentCustomProperties {\n    $message: MessageApi;\n  }\n}\n"],"names":["create","props","visible","ref","root","document","createElement","body","appendChild","component","defineComponent","render","h","Message","value","onClose","onClosed","remove","createApp","mount","nextTick","defaultProps","align","closeBtn","content","duration","theme","zIndex","onOpen","onOpened","onChange","forEach","options","install","app","name","config","globalProperties","$message","MessagePlugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,SAASA,OAAOC,KAA6B,EAAA;AACrC,EAAA,IAAAC,OAAA,GAAUC,IAAI,KAAK,CAAA,CAAA;AACnB,EAAA,IAAAC,IAAA,GAAOC,QAAS,CAAAC,aAAA,CAAc,KAAK,CAAA,CAAA;AAChCD,EAAAA,QAAA,CAAAE,IAAA,CAAKC,YAAYJ,IAAI,CAAA,CAAA;EAE9B,IAAMK,YAAYC,eAAgB,CAAA;AAChCC,IAAAA,MAAA,EAAQ,SAAA,MAAA,GAAA;AAAA,MAAA,OAENC,CAAA,CAAEC,MAAS,EAAA,aAAA,CAAA,aAAA,CAAA,EAAA,EACNZ,KAAA,CAAA,EAAA,EAAA,EAAA;QACHC,SAASA,OAAQ,CAAAY,KAAA;AACjBC,QAAAA,SAAS,SAAM,OAAA,GAAA;UACbb,OAAA,CAAQY,KAAQ,GAAA,KAAA,CAAA;SAClB;AACAE,QAAAA,UAAU,SAAM,QAAA,GAAA;UACdZ,IAAA,CAAKa,MAAO,EAAA,CAAA;AACd,SAAA;OACD,CAAA,CAAA,CAAA;AAAA,KAAA;AACL,GAAC,CAAA,CAAA;AAESC,EAAAA,SAAA,CAAAT,SAAS,CAAE,CAAAU,KAAA,CAAMf,IAAI,CAAA,CAAA;AAE/BgB,EAAAA,QAAA,CAAS,YAAM;IACblB,OAAA,CAAQY,KAAQ,GAAA,IAAA,CAAA;AAClB,GAAC,CAAA,CAAA;AACH,CAAA;AAEA,IAAMO,YAA+B,GAAA;AACnCC,EAAAA,KAAO,EAAA,MAAA;AACPC,EAAAA,QAAU,EAAA,EAAA;AACVC,EAAAA,OAAS,EAAA,EAAA;AACTC,EAAAA,QAAU,EAAA,GAAA;AACVC,EAAAA,KAAO,EAAA,MAAA;AACPxB,EAAAA,OAAS,EAAA,KAAA;AACTyB,EAAAA,MAAQ,EAAA,GAAA;EACRZ,SAAS,SAAM,OAAA,GAAA,EAAC;EAChBC,UAAU,SAAM,QAAA,GAAA,EAAC;EACjBY,QAAQ,SAAM,MAAA,GAAA,EAAC;EACfC,UAAU,SAAM,QAAA,GAAA,EAAC;EACjBC,UAAU,oBAAM,EAAC;AACnB,CAAA,CAAA;AAEC,CAAC,QAAQ,SAAW,EAAA,SAAA,EAAW,OAAO,CAAyB,CAAAC,OAAA,CAAQ,UAACL,KAAkC,EAAA;AACjGb,EAAAA,MAAA,CAAAa,KAAA,CAAA,GAAS,UAACM,OAAqC,EAAA;IACrD,IAAI/B,KAAwB,mCACvBoB,YAAA,CAAA,EAAA,EAAA,EAAA;AACHK,MAAAA,KAAA,EAAAA,KAAAA;KACF,CAAA,CAAA;AAEI,IAAA,IAAA,OAAOM,YAAY,QAAU,EAAA;MAC/B/B,KAAA,CAAMuB,OAAU,GAAAQ,OAAA,CAAA;AAClB,KAAO,MAAA;AACL/B,MAAAA,KAAA,GAAaA,aAAAA,CAAAA,aAAAA,CAAAA,EAAAA,EAAAA,KAAO,CAAG+B,EAAAA,OAAQ,CAAA,CAAA;AACjC,KAAA;IAEAhC,MAAA,CAAOC,KAAK,CAAA,CAAA;GACd,CAAA;AACF,CAAC,CAAA,CAAA;AAEDY,MAAA,CAAQoB,OAAU,GAAA,UAACC,GAAU,EAAc;EAAA,IAAdC,IAAA,uEAAO,EAAO,CAAA;EACzCD,GAAA,CAAIzB,SAAU,CAAA0B,IAAA,IAAQtB,MAAQ,CAAAsB,IAAA,EAAMtB,MAAO,CAAA,CAAA;AAIvCqB,EAAAA,GAAA,CAAAE,MAAA,CAAOC,iBAAiBC,QAAW,GAAAzB,MAAA,CAAA;AACzC,CAAA,CAAA;AAaO,IAAM0B,aAA8D,GAAA1B;;;;"}