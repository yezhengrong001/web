{"version":3,"file":"search.js","sources":["../../src/search/search.vue","../../src/search/search.vue?vue&type=template&id=4b3de857&lang.js"],"sourcesContent":["<template>\n  <div :class=\"classes\">\n    <div :class=\"`${name}__form`\" :style=\"shapeStyle\">\n      <div :class=\"`${name}__box`\">\n        <div :class=\"`${name}__icon-search`\">\n          <slot name=\"leftIcon\">\n            <t-icon-search />\n          </slot>\n        </div>\n        <t-input\n          ref=\"searchInput\"\n          v-model=\"value\"\n          type=\"search\"\n          :class=\"`${name}__input`\"\n          :autofocus=\"focus\"\n          :placeholder=\"placeholder\"\n          @blur=\"onBlur\"\n          @focus=\"onFocus\"\n          @change=\"onChange\"\n        />\n        <div :class=\"`${name}__icon-close`\">\n          <t-icon-clear @click=\"onClear\" />\n        </div>\n      </div>\n      <label v-show=\"state.labelActive\" :class=\"`${name}__label`\" :style=\"shapeStyle\" @click=\"onClick\">\n        <div :class=\"`${name}__label-icon-search`\">\n          <slot name=\"leftIcon\">\n            <t-icon-search />\n          </slot>\n        </div>\n        <span :class=\"`${name}__label-text`\">{{ placeholder }}</span>\n      </label>\n    </div>\n    <slot name=\"action\">\n      <t-button\n        v-if=\"action\"\n        v-show=\"!state.labelActive\"\n        variant=\"text\"\n        :class=\"`${name}__cancel-button`\"\n        @click=\"onCancel\"\n      >\n        {{ action }}\n      </t-button>\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { SearchIcon as TIconSearch, CloseCircleFilledIcon as TIconClear } from 'tdesign-icons-vue-next';\nimport { ref, reactive, computed, defineComponent, toRefs } from 'vue';\nimport config from '../config';\nimport TButton from '../button';\nimport TInput, { InputValue } from '../input';\nimport { extendAPI } from '../shared';\nimport searchProps from './props';\nimport { useDefault } from '../shared/useDefault';\n\nconst { prefix } = config;\nconst name = `${prefix}-search`;\n\ntype InputBlurContext = { e: FocusEvent };\ntype InputFocusContent = { e: FocusEvent };\ntype InputChangeContext = { e?: MouseEvent | InputEvent | undefined } | undefined;\n\nexport default defineComponent({\n  name,\n  components: { TIconSearch, TIconClear, TButton, TInput },\n  props: searchProps,\n  setup(props, { emit }) {\n    const classes = computed(() => ({\n      [`${name}`]: true,\n      [`${prefix}-is-focused`]: !state.labelActive,\n    }));\n    const [value] = useDefault(props, emit, 'value', 'change');\n    const shapeStyle = computed(() => ({\n      borderRadius: props.shape === 'square' ? undefined : '50px',\n    }));\n    const searchInput = ref();\n\n    const state = reactive({\n      labelActive: !value.value,\n      inputVal: '',\n    });\n\n    const doFocus = () => {\n      searchInput.value?.focus();\n    };\n\n    const onBlur = (value: any, context: InputBlurContext) => {\n      state.labelActive = !value;\n      props.onBlur?.(value, { e: context.e });\n    };\n\n    const onClick = () => {\n      state.labelActive = !state.labelActive;\n      doFocus();\n    };\n\n    const onFocus = (value: InputValue, context: InputFocusContent) => {\n      state.labelActive = false;\n      props.onFocus?.(value as string, { e: context.e });\n    };\n\n    const onClear = (e: MouseEvent) => {\n      searchInput.value.innerValue = '';\n      props.onClear?.({ e });\n    };\n\n    const onCancel = (e: MouseEvent) => {\n      state.labelActive = !state.labelActive;\n      props.onActionClick?.({ e });\n    };\n\n    const onChange = (value: InputValue, context: InputChangeContext) => {\n      props.onChange?.(value as string, { e: context?.e });\n    };\n\n    extendAPI({ doFocus, blur });\n\n    return {\n      ...toRefs(props),\n      name: ref(name),\n      classes,\n      shapeStyle,\n      onClick,\n      onCancel,\n      onBlur,\n      onFocus,\n      onClear,\n      onChange,\n      state,\n      value,\n      searchInput,\n    };\n  },\n});\n</script>\n","<template>\n  <div :class=\"classes\">\n    <div :class=\"`${name}__form`\" :style=\"shapeStyle\">\n      <div :class=\"`${name}__box`\">\n        <div :class=\"`${name}__icon-search`\">\n          <slot name=\"leftIcon\">\n            <t-icon-search />\n          </slot>\n        </div>\n        <t-input\n          ref=\"searchInput\"\n          v-model=\"value\"\n          type=\"search\"\n          :class=\"`${name}__input`\"\n          :autofocus=\"focus\"\n          :placeholder=\"placeholder\"\n          @blur=\"onBlur\"\n          @focus=\"onFocus\"\n          @change=\"onChange\"\n        />\n        <div :class=\"`${name}__icon-close`\">\n          <t-icon-clear @click=\"onClear\" />\n        </div>\n      </div>\n      <label v-show=\"state.labelActive\" :class=\"`${name}__label`\" :style=\"shapeStyle\" @click=\"onClick\">\n        <div :class=\"`${name}__label-icon-search`\">\n          <slot name=\"leftIcon\">\n            <t-icon-search />\n          </slot>\n        </div>\n        <span :class=\"`${name}__label-text`\">{{ placeholder }}</span>\n      </label>\n    </div>\n    <slot name=\"action\">\n      <t-button\n        v-if=\"action\"\n        v-show=\"!state.labelActive\"\n        variant=\"text\"\n        :class=\"`${name}__cancel-button`\"\n        @click=\"onCancel\"\n      >\n        {{ action }}\n      </t-button>\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { SearchIcon as TIconSearch, CloseCircleFilledIcon as TIconClear } from 'tdesign-icons-vue-next';\nimport { ref, reactive, computed, defineComponent, toRefs } from 'vue';\nimport config from '../config';\nimport TButton from '../button';\nimport TInput, { InputValue } from '../input';\nimport { extendAPI } from '../shared';\nimport searchProps from './props';\nimport { useDefault } from '../shared/useDefault';\n\nconst { prefix } = config;\nconst name = `${prefix}-search`;\n\ntype InputBlurContext = { e: FocusEvent };\ntype InputFocusContent = { e: FocusEvent };\ntype InputChangeContext = { e?: MouseEvent | InputEvent | undefined } | undefined;\n\nexport default defineComponent({\n  name,\n  components: { TIconSearch, TIconClear, TButton, TInput },\n  props: searchProps,\n  setup(props, { emit }) {\n    const classes = computed(() => ({\n      [`${name}`]: true,\n      [`${prefix}-is-focused`]: !state.labelActive,\n    }));\n    const [value] = useDefault(props, emit, 'value', 'change');\n    const shapeStyle = computed(() => ({\n      borderRadius: props.shape === 'square' ? undefined : '50px',\n    }));\n    const searchInput = ref();\n\n    const state = reactive({\n      labelActive: !value.value,\n      inputVal: '',\n    });\n\n    const doFocus = () => {\n      searchInput.value?.focus();\n    };\n\n    const onBlur = (value: any, context: InputBlurContext) => {\n      state.labelActive = !value;\n      props.onBlur?.(value, { e: context.e });\n    };\n\n    const onClick = () => {\n      state.labelActive = !state.labelActive;\n      doFocus();\n    };\n\n    const onFocus = (value: InputValue, context: InputFocusContent) => {\n      state.labelActive = false;\n      props.onFocus?.(value as string, { e: context.e });\n    };\n\n    const onClear = (e: MouseEvent) => {\n      searchInput.value.innerValue = '';\n      props.onClear?.({ e });\n    };\n\n    const onCancel = (e: MouseEvent) => {\n      state.labelActive = !state.labelActive;\n      props.onActionClick?.({ e });\n    };\n\n    const onChange = (value: InputValue, context: InputChangeContext) => {\n      props.onChange?.(value as string, { e: context?.e });\n    };\n\n    extendAPI({ doFocus, blur });\n\n    return {\n      ...toRefs(props),\n      name: ref(name),\n      classes,\n      shapeStyle,\n      onClick,\n      onCancel,\n      onBlur,\n      onFocus,\n      onClear,\n      onChange,\n      state,\n      value,\n      searchInput,\n    };\n  },\n});\n</script>\n"],"names":["prefix","config","name","defineComponent","components","TIconSearch","TIconClear","TButton","TInput","props","searchProps","setup","emit","classes","computed","state","labelActive","useDefault","value","shapeStyle","borderRadius","shape","searchInput","ref","reactive","inputVal","doFocus","focus","onBlur","context","e","onClick","onFocus","onClear","innerValue","onCancel","onActionClick","onChange","extendAPI","blur","toRefs","_createElementBlock","class","_ctx","_createElementVNode","style","_renderSlot","_createVNode","_component_t_icon_search","_component_t_input","$event","type","autofocus","placeholder","_component_t_icon_clear","_vShow","action","_createBlock","_component_t_button","variant"],"mappings":"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"}