{"version":3,"file":"context.js","sources":["../../src/dropdown-menu/context.ts"],"sourcesContent":["export type DropdownMenuDo = () => void;\n\nexport type DropdownMenuState = {\n  activeId: number | null;\n  barRect: any;\n  childCount: number;\n};\n\nexport type DropdownMenuControl = {\n  expandMenu: (item: any, idx: number) => void;\n  collapseMenu: () => void;\n};\n\nexport enum DropdownMenuExpandState {\n  expanded = 'expanded',\n  collapsed = 'collapsed',\n}\n\nexport type DropdownMenuContext = {\n  expandedMenuControl: DropdownMenuControl | null;\n  recordMenuExpanded(container: any, menuControl: DropdownMenuControl, action: DropdownMenuExpandState): void;\n};\n\nlet oldOverflow: string | null = null;\n\nexport const context: DropdownMenuContext = {\n  expandedMenuControl: null,\n  recordMenuExpanded(container: any, menuControl: DropdownMenuControl, action: DropdownMenuExpandState) {\n    const containerDom = container;\n    if (action === DropdownMenuExpandState.expanded) {\n      const { expandedMenuControl } = this;\n      if (expandedMenuControl && expandedMenuControl !== menuControl) {\n        expandedMenuControl.collapseMenu();\n      }\n      this.expandedMenuControl = menuControl;\n      if (oldOverflow === null) {\n        oldOverflow = container.style.overflow;\n        containerDom.style.overflow = 'hidden';\n      }\n    } else if (action === DropdownMenuExpandState.collapsed) {\n      if (this.expandedMenuControl === menuControl) {\n        this.expandedMenuControl = null;\n      }\n      if (!this.expandedMenuControl && oldOverflow !== null) {\n        containerDom.style.overflow = oldOverflow as string;\n        oldOverflow = null;\n      }\n    }\n  },\n};\n"],"names":["DropdownMenuExpandState","oldOverflow","context","expandedMenuControl","recordMenuExpanded","container","menuControl","action","containerDom","collapseMenu","style","overflow"],"mappings":";;;;;;IAaYA,uBAAA,4BAAAA,wBAAL,EAAA;AACLA,EAAAA,yBAAA,UAAW,CAAA,GAAA,UAAA,CAAA;AACXA,EAAAA,yBAAA,WAAY,CAAA,GAAA,WAAA,CAAA;AAFFA,EAAAA,OAAAA,wBAAAA,CAAAA;AAAA,CAAA,CAAAA,uBAAA,IAAA,EAAA,EAAA;AAUZ,IAAIC,WAA6B,GAAA,IAAA,CAAA;AAE1B,IAAMC,OAA+B,GAAA;AAC1CC,EAAAA,mBAAqB,EAAA,IAAA;AACrBC,EAAAA,kBAAA,8BAAmBC,SAAgB,EAAAC,WAAA,EAAkCC,MAAiC,EAAA;IACpG,IAAMC,YAAe,GAAAH,SAAA,CAAA;AACrB,IAAA,IAAIE,WAAW,UAAkC,iBAAA;AACzC,MAAA,IAAEJ,sBAAwB,IAAA,CAAxBA;AACJ,MAAA,IAAAA,mBAAA,IAAuBA,wBAAwBG,WAAa,EAAA;QAC9DH,mBAAA,CAAoBM,YAAa,EAAA,CAAA;AACnC,OAAA;MACA,IAAA,CAAKN,mBAAsB,GAAAG,WAAA,CAAA;MAC3B,IAAIL,gBAAgB,IAAM,EAAA;AACxBA,QAAAA,WAAA,GAAcI,UAAUK,KAAM,CAAAC,QAAA,CAAA;AAC9BH,QAAAA,YAAA,CAAaE,MAAMC,QAAW,GAAA,QAAA,CAAA;AAChC,OAAA;AACF,KAAA,MAAA,IAAWJ,WAAW,WAAmC,kBAAA;AACnD,MAAA,IAAA,IAAA,CAAKJ,wBAAwBG,WAAa,EAAA;QAC5C,IAAA,CAAKH,mBAAsB,GAAA,IAAA,CAAA;AAC7B,OAAA;MACA,IAAI,CAAC,IAAA,CAAKA,mBAAuB,IAAAF,WAAA,KAAgB,IAAM,EAAA;AACrDO,QAAAA,YAAA,CAAaE,MAAMC,QAAW,GAAAV,WAAA,CAAA;AAChBA,QAAAA,WAAA,GAAA,IAAA,CAAA;AAChB,OAAA;AACF,KAAA;AACF,GAAA;AACF;;;;"}