{"version":3,"file":"getOptions.js","sources":["../../../src/checkbox/hooks/getOptions.ts"],"sourcesContent":["import { VNode, Ref, ref, watch, onMounted, Slots, toRefs } from 'vue';\n\nimport { CheckboxOption, CheckboxOptionObj, TdCheckboxGroupProps } from '../type';\nimport { useChildSlots } from '../../shared';\n\nexport const getOptionListBySlots = (nodes: VNode[]) => {\n  const arr: Array<CheckboxOptionObj> = [];\n  nodes?.forEach((node) => {\n    const option = node.props as CheckboxOptionObj;\n    if (option?.['check-all'] === '' || option?.['check-all'] === true) {\n      option.checkAll = true;\n    }\n    option && arr.push(option);\n  });\n  return arr;\n};\n\nexport const getOptions = (props: any, slots: Slots) => {\n  const { options } = toRefs(props);\n  const optionList = ref<CheckboxOptionObj[]>([]);\n\n  watch(\n    options,\n    (options) => {\n      if (!options) return [];\n      optionList.value = options.map((item: CheckboxOption) => {\n        let r: CheckboxOptionObj = {};\n        if (typeof item !== 'object') {\n          r = { label: String(item), value: item };\n        } else {\n          r = { ...item };\n          r.disabled = r.disabled === undefined ? props.disabled : r.disabled;\n        }\n        return r;\n      });\n    },\n    { immediate: true },\n  );\n\n  onMounted(() => {\n    const nodes = slots.default && slots.default();\n    if (nodes !== undefined) {\n      optionList.value = getOptionListBySlots(useChildSlots('t-checkbox'));\n    }\n  });\n\n  return optionList;\n};\n"],"names":["getOptionListBySlots","nodes","arr","forEach","node","option","props","checkAll","push","getOptions","slots","toRefs","options","optionList","ref","watch","value","map","item","r","label","String","disabled","immediate","onMounted","default","useChildSlots"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAKaA,oBAAA,GAAuB,SAAvBA,oBAAA,CAAwBC,KAAmB,EAAA;EACtD,IAAMC,MAAgC,EAAC,CAAA;EAChCD,KAAA,KAAA,IAAA,IAAAA,KAAA,KAAAA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,KAAA,CAAAE,OAAA,CAAQ,UAACC,IAAS,EAAA;AACvB,IAAA,IAAMC,SAASD,IAAK,CAAAE,KAAA,CAAA;IACpB,IAAI,CAAAD,MAAS,KAATA,IAAAA,IAAAA,MAAS,uBAATA,MAAS,CAAA,WAAA,CAAA,MAAiB,EAAM,IAAA,CAAAA,MAAA,KAAAA,IAAAA,IAAAA,MAAA,KAAAA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,MAAA,CAAS,kBAAiB,IAAM,EAAA;MAClEA,MAAA,CAAOE,QAAW,GAAA,IAAA,CAAA;AACpB,KAAA;AACUF,IAAAA,MAAA,IAAAH,GAAA,CAAIM,KAAKH,MAAM,CAAA,CAAA;AAC3B,GAAC,CAAA,CAAA;AACM,EAAA,OAAAH,GAAA,CAAA;AACT,EAAA;AAEa,IAAAO,UAAA,GAAa,SAAbA,UAAA,CAAcH,KAAA,EAAYI,KAAiB,EAAA;EACtD,IAAoBC,OAAAA,GAAAA,MAAA,CAAOL,KAAK,CAAA;AAAxBM,IAAAA,OAAA,WAAAA,OAAA,CAAA;AACF,EAAA,IAAAC,UAAA,GAAaC,GAAyB,CAAA,EAAE,CAAA,CAAA;AAE9CC,EAAAA,KAAA,CACEH,OAAA,EACA,UAACA,QAAY,EAAA;AACX,IAAA,IAAI,CAACA,QAAAA,EAAS,OAAO,EAAC,CAAA;IACtBC,UAAA,CAAWG,KAAQJ,GAAAA,QAAAA,CAAQK,GAAI,CAAA,UAACC,IAAyB,EAAA;MACvD,IAAIC,IAAuB,EAAC,CAAA;AACxB,MAAA,IAAA,OAAOD,CAAAA,KAAS,KAAA,QAAU,EAAA;AAC5BC,QAAAA,CAAA,GAAI;AAAEC,UAAAA,KAAO,EAAAC,MAAA,CAAOH,IAAI,CAAA;AAAGF,UAAAA,OAAOE,IAAAA;SAAK,CAAA;AACzC,OAAO,MAAA;QACDC,CAAA,GAAA,aAAA,CAAA,EAAA,EAAKD,IAAK,CAAA,CAAA;AACdC,QAAAA,CAAA,CAAEG,WAAWH,CAAE,CAAAG,QAAA,KAAa,KAAY,CAAA,GAAAhB,KAAA,CAAMgB,WAAWH,CAAE,CAAAG,QAAA,CAAA;AAC7D,OAAA;AACO,MAAA,OAAAH,CAAA,CAAA;AACT,KAAC,CAAA,CAAA;AACH,GAAA,EACA;AAAEI,IAAAA,WAAW,IAAA;AAAK,GAAA,CACpB,CAAA;AAEAC,EAAAA,SAAA,CAAU,YAAM;IACd,IAAMvB,KAAQ,GAAAS,KAAA,CAAMe,OAAW,IAAAf,KAAA,CAAMe,OAAQ,EAAA,CAAA;AAC7C,IAAA,IAAIxB,UAAU,KAAW,CAAA,EAAA;MACvBY,UAAA,CAAWG,KAAQ,GAAAhB,oBAAA,CAAqB0B,aAAc,CAAA,YAAY,CAAC,CAAA,CAAA;AACrE,KAAA;AACF,GAAC,CAAA,CAAA;AAEM,EAAA,OAAAb,UAAA,CAAA;AACT;;;;"}