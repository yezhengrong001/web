{"version":3,"file":"util.js","sources":["../../src/upload/util.ts"],"sourcesContent":["import { SizeUnit } from './type';\n/**\n * [*] 表示方法采用这种方式\n * [x] 表示方法不采用这种方式\n *\n * [x] bit      位              b     0 or 1\n * [*] byte     字节            B     8 bits\n * [x] kilobit  千位            kb    1000 bites\n * [*] kilobyte 千字节(二进制)   KB    1024 bytes\n * [x] kilobyte 千字节(十进制)   KB    1000 bytes\n * [x] Megabite 百万位          Mb    1000 kilobits\n * [*] Megabyte 兆字节(二进制)   KB    1024 kilobytes\n * [*] Megabyte 兆字节(十进制)   KB    1000 kilobytes\n * [x] Gigabit  万亿位          Gb    1000 Megabite\n * [*] Gigabyte 吉字节(二进制)   GB    1024 Megabytes\n * [x] Gigabyte 吉字节(十进制)   GB    1000 Megabytes\n */\n\n// 各个单位和 KB 的关系\nconst SIZE_MAP = {\n  B: 1024,\n  KB: 1,\n  MB: 1048576, // 1024 * 1024\n  GB: 1073741824, // 1024 * 1024 * 1024\n};\n\n/**\n * 大小比较\n * @param size 文件大小\n * @param unit 计算机计量单位\n */\nexport function isOverSizeLimit(fileSize: number, sizeLimit: number, unit: SizeUnit) {\n  // 以 KB 为单位进行比较\n  const units = ['B', 'KB', 'MB', 'GB'];\n  const KB_INDEX = 1;\n  let index = units.indexOf(unit);\n  if (index === -1) {\n    console.warn(`TDesign Upload Warn: \\`sizeLimit.unit\\` can only be one of ${units.join()}`);\n    index = KB_INDEX;\n  }\n  const num = SIZE_MAP[unit];\n  const limit = index < KB_INDEX ? sizeLimit / num : sizeLimit * num;\n  return fileSize <= limit;\n}\n"],"names":["SIZE_MAP","B","KB","MB","GB","isOverSizeLimit","fileSize","sizeLimit","unit","units","KB_INDEX","index","indexOf","console","warn","join","num","limit"],"mappings":";;;;;;AAmBA,IAAMA,QAAW,GAAA;AACfC,EAAAA,CAAG,EAAA,IAAA;AACHC,EAAAA,EAAI,EAAA,CAAA;AACJC,EAAAA,EAAI,EAAA,OAAA;AACJC,EAAAA,EAAI,EAAA,UAAA;AACN,CAAA,CAAA;AAOgB,SAAAC,eAAA,CAAgBC,QAAkB,EAAAC,SAAA,EAAmBC,IAAgB,EAAA;EAEnF,IAAMC,KAAQ,GAAA,CAAC,GAAK,EAAA,IAAA,EAAM,MAAM,IAAI,CAAA,CAAA;EACpC,IAAMC,QAAW,GAAA,CAAA,CAAA;AACb,EAAA,IAAAC,KAAA,GAAQF,KAAM,CAAAG,OAAA,CAAQJ,IAAI,CAAA,CAAA;AAC9B,EAAA,IAAIG,UAAU,CAAI,CAAA,EAAA;AAChBE,IAAAA,OAAA,CAAQC,IAAK,CAAA,2DAAA,CAAA,MAAA,CAA8DL,KAAM,CAAAM,IAAA,EAAQ,CAAA,CAAA,CAAA;AACjFJ,IAAAA,KAAA,GAAAD,QAAA,CAAA;AACV,GAAA;AACA,EAAA,IAAMM,MAAMhB,QAAS,CAAAQ,IAAA,CAAA,CAAA;AACrB,EAAA,IAAMS,KAAQ,GAAAN,KAAA,GAAQD,QAAW,GAAAH,SAAA,GAAYS,MAAMT,SAAY,GAAAS,GAAA,CAAA;EAC/D,OAAOV,QAAY,IAAAW,KAAA,CAAA;AACrB;;;;"}