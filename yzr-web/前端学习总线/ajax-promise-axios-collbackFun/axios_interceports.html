<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>axios基础学习</title>
		<style>
			*{
				margin:0;
				padding: 0;
			}
			#get{
				border: 0;
				border-radius: 10px;
				width: 80px;
				height: 30px;
				color: white;
				background-color: antiquewhite;
			}
			#post{
				border: 0;
				border-radius: 10px;
				width: 80px;
				height: 30px;
				color: white;
				background-color: skyblue;
			}
			#put{
				border: 0;
				border-radius: 10px;
				width: 80px;
				height: 30px;
				color: white;
				background-color: gray;
			}
			#delete{
				border: 0;
				border-radius: 10px;
				width: 80px;
				height: 30px;
				color: white;
				background-color: rebeccapurple;
			}
		</style>
	</head>
	<body>
		<h3>axios_interceptor</h3>
		<hr/>
		<button id='get'>get请求</button>
		<button id='post'>post请求</button>
		<button id='put'>put请求</button>
		<button id='delete'>delete请求</button>
		
		<script src="https://cdn.bootcdn.net/ajax/libs/axios/1.1.3/axios.min.js"></script>
		<script>
			const btn = document.querySelectorAll('button')
			// Add a request interceptor
			axios.interceptors.request.use(function (config) {
			    // Do something before request is sent
				console.log("success req")
			    return config;
			  }, function (error) {
			    // Do something with request error
				console.log("loser req")
			    return Promise.reject(error);
			  });
			// Add a request interceptor
			axios.interceptors.request.use(function (config) {
			    // Do something before request is sent
				console.log("success req1")
			    return config;
			  }, function (error) {
			    // Do something with request error
				console.log("loser req1")
			    return Promise.reject(error);
			  });
			// Add a response interceptor
			axios.interceptors.response.use(function (response) {
			    // Any status code that lie within the range of 2xx cause this function to trigger
			    // Do something with response data
				console.log("success res")
			    return response;
			  }, function (error) {
			    // Any status codes that falls outside the range of 2xx cause this function to trigger
			    // Do something with response error
				console.log("loser res")
			    return Promise.reject(error);
			  });
			  // Add a response interceptor
			  axios.interceptors.response.use(function (response) {
			      // Any status code that lie within the range of 2xx cause this function to trigger
			      // Do something with response data
			  	console.log("success res1")
			      return response;
			    }, function (error) {
			      // Any status codes that falls outside the range of 2xx cause this function to trigger
			      // Do something with response error
			  	console.log("loser res1")
			      return Promise.reject(error);
			    });
			// 查
			btn[0].onclick=function(){
				axios.get('http://localhost:3000/posts/1').then((res)=>{
					console.log(res.data)
				})
			}
			// 增
			// btn[1].onclick=function(){
			// 	axios.post('http://localhost:3000/posts',{'title':'title','author':'author'}).then((res)=>{
			// 		console.log(res)
			// 	})
			// }
			// 改
			// btn[2].onclick=function(){
			// 	axios.put('http://localhost:3000/posts/8',{'title':'title','author':'author'}).then((res)=>{
			// 		console.log(res)
			// 	})
			// }
			// 删
			// btn[3].onclick=function(){
			// 	axios.delete('http://localhost:3000/posts/9').then((res)=>{
			// 		console.log(res)
			// 	})
			// }
			
			// btn[0].onclick=function(){
			// 	axios({
			// 		method:'get',
			// 		url:'http://localhost:3000/posts/1'
			// 	}).then((res)=>{
			// 		console.log(res.data)
			// 	})
			// }
			// btn[1].onclick=function(){
			// 	axios({
			// 		method:'post',
			// 		url:'http://localhost:3000/posts',
			// 		data: {
			// 		    'title': 'Fred',
			// 			'author':'me'
			// 		}
			// 	}).then((res)=>{
			// 		console.log(res.data)
			// 	})
			// }
			// btn[2].onclick=function(){
			// 	axios({
			// 		method:'put',
			// 		url:'http://localhost:3000/posts/2',
			// 		data: {
			// 		    'title': 'Fred',
			// 			'author':'me'
			// 		}
			// 	}).then((res)=>{
			// 		console.log(res.data)
			// 	})
			// }
			// btn[3].onclick=function(){
			// 	axios({
			// 		method:'delete',
			// 		url:'http://localhost:3000/posts/6',
			// 	}).then((res)=>{
			// 		console.log(res.data)
			// 	})
			// }
		</script>
	</body>
</html>